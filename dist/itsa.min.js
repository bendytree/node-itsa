/*!
 * @license
 * itsa 2.1.93
 * Copyright 2021 Josh Wright <https://www.joshwright.com>
 * MIT LICENSE
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ItsaLib=t():e.ItsaLib=t()}(this,(function(){return(()=>{"use strict";var e={44:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(589),u=r(28),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"all",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a,i=t.flat().map((function(e){return u.primitiveToItsa(e)})),o=n(i);try{for(o.s();!(a=o.n()).done;){var l,s=a.value,c=n(s.predicates);try{for(c.s();!(l=c.n()).done;){var f=l.value;this.predicates.push(f)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}return this}}])&&i(t.prototype,r),a&&i(t,a),e}();o.Itsa.extend(l)},122:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaAnd=void 0;var o=r(589),u=r(28),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"and",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a,i=t.flat().map((function(e){return u.primitiveToItsa(e)})),o=n(i);try{for(o.s();!(a=o.n()).done;){var l,s=a.value,c=n(s.predicates);try{for(c.s();!(l=c.n()).done;){var f=l.value;this.predicates.push(f)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}return this}}])&&i(t.prototype,r),a&&i(t,a),e}();t.ItsaAnd=l,o.Itsa.extend(l)},970:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(589),u=r(28),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"any",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.flat().map((function(e){return u.primitiveToItsa(e)})),a={schemas:n};return this.predicates.push({id:"any",settings:a}),this}}])&&i(t.prototype,r),n&&i(t,n),e}(),s={id:"any",validate:function(e,t){var r=e.key,a=e.val,i=e.parent,o=e.validation,u=e.exists,l=e.result,s=t.schemas;if(0!==s.length){var c,f=[],v=n(s);try{for(v.s();!(c=v.n()).done;){var d=c.value,p=d.predicates.find((function(e){return!["equal","falsy"].includes(e.id)})),y=d._validate({key:r,parent:i,val:a,exists:u,settings:o,path:e.path});if(y.ok)return;p&&f.push(y.message)}}catch(e){v.e(e)}finally{v.f()}1===f.length?l.registerError(f[0]):l.registerError("No schemas matched.")}}};o.Itsa.extend(l,s)},776:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaAnything=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"anything",value:function(){return this.predicates.push({id:"anything",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaAnything=i,a.Itsa.extend(i,{id:"anything",validate:function(e){}})},911:(e,t,r)=>{function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaArray=void 0;var o=r(589),u=r(28),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"array",value:function(e){var t={example:e?u.primitiveToItsa(e):null};return this.predicates.push({id:"array",settings:t}),this}}])&&i(t.prototype,r),n&&i(t,n),e}();t.ItsaArray=l,o.Itsa.extend(l,{id:"array",builder:function(e){return[]},validate:function(e,t){var r=e.val,a=e.validation,i=e.exists,o=e.result,u=e.type,l=t.example;if(!Array.isArray(r))return o.registerError("Expected array but found ".concat(u));if(l&&r.length)for(var s=0;s<r.length;s++){var c=r[s],f=l._validate({key:s,parent:r,val:c,exists:i,settings:a,path:[].concat(n(e.path),[s])});o.registerResult(f)}}})},850:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaBetween=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"between",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r;return n.min=e,n.max=t,this.predicates.push({id:"between",settings:n}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaBetween=i,a.Itsa.extend(i,{id:"between",validate:function(e,t){var r,n=e.val,a=e.result,i=t.min,o=t.max,u=null===(r=t.inclusive)||void 0===r||r;(u?n<i:n<=i)&&a.registerError("Value cannot be under ".concat(i)),(u?n>o:n>=o)&&a.registerError("Value cannot be above ".concat(o))}})},233:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaBoolean=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"boolean",value:function(){return this.predicates.push({id:"boolean",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaBoolean=i,a.Itsa.extend(i,{id:"boolean",validate:function(e){var t=e.type,r=e.result;"boolean"!==t&&r.registerError("Expected bool but found ".concat(t))}})},152:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var u=r(589);var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"build",value:function(e){var t=function(e){var t,r=i(e.predicates);try{for(r.s();!(t=r.n()).done;){var n=t.value,a=u.Itsa.validators[n.id];if(a.builder)return a.builder(n.settings)}}catch(e){r.e(e)}finally{r.f()}}(this);return t&&"object"===n(t)&&e&&"object"===n(e)&&Object.assign(t,e),t}}])&&a(t.prototype,r),o&&a(t,o),e}();u.Itsa.extend(l)},758:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaClone=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,(r=[{key:"clone",value:function(){var e=JSON.parse(JSON.stringify(this));return a.itsa.load(e)}}])&&n(t.prototype,r),i&&n(t,i),e}();t.ItsaClone=i,a.Itsa.extend(i)},438:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaConstructor=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"constructorIs",value:function(e){var t={cls:e};return this.predicates.push({id:"constructor",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaConstructor=i,a.Itsa.extend(i,{id:"constructor",validate:function(e,t){var r=e.val,n=e.result;if(!(null!=r&&r.constructor===t.cls))return n.registerError("Expected to be ".concat(t.cls))}})},801:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaConvert=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"convert",value:function(e){var t={converter:e};return this.predicates.push({id:"convert",settings:t}),this}},{key:"to",value:function(e){var t={converter:e};return this.predicates.push({id:"convert",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaConvert=i,a.Itsa.extend(i,{id:"convert",validate:function(e,t){var r=e.val,n=e.setVal,a=e.result,i=t.converter;if("function"==typeof i)try{n(i(r))}catch(e){a.registerError(e)}}})},228:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaDate=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"date",value:function(){return this.predicates.push({id:"date",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaDate=i,a.Itsa.extend(i,{id:"date",validate:function(e){var t=e.val,r=e.result,n=Object.prototype.toString.call(t);if("[object Date]"!==n)return r.registerError("Expected date but found ".concat(n));isFinite(t)||r.registerError("Date is not valid")}})},263:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.itsaField=t.itsaSchema=t.ItsaSchema=void 0;var i=r(589);t.ItsaSchema=function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.constructor.schema.build(t)},t.itsaSchema=function(e){return function(t){t.schema&&e?function(e,t){var r,a=n(t.predicates);try{for(a.s();!(r=a.n()).done;){var i=r.value;if("object"===i.id){var o=i.settings;if(o.example)for(var u=0,l=Object.keys(o.example);u<l.length;u++){var s=l[u];e.addProperty(s,o.example[s])}}else e.predicates.push(i)}}catch(e){a.e(e)}finally{a.f()}}(t.schema,e):e?t.schema=e:t.schema||(t.schema=i.itsa.object({}))}},t.itsaField=function(e){return function(t,r){var n=t.constructor;if(!Object.getOwnPropertyDescriptor(n,"schema")){var a=n.schema;n.schema=a?a.clone():i.itsa.object({})}n.schema.addProperty(r,e)}}},735:(e,t,r)=>{var n;function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaDefault=void 0;var i=r(589),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"default",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.val=e,this.predicates.push({id:"default",settings:t}),this}},{key:"defaultNow",value:function(){return this.predicates.push({id:"defaultNow",settings:null}),this}}])&&a(t.prototype,r),n&&a(t,n),e}();t.ItsaDefault=o,(n=i.Itsa).extend.apply(n,[o].concat([{id:"default",builder:function(e){return e.val},validate:function(e,t){var r,n=e.val,a=e.setVal;(null!==(r=t.falsy)&&void 0!==r&&r?!n:null==n)&&a(t.val)}},{id:"defaultNow",builder:function(e){return new Date},validate:function(e){var t=e.val,r=e.setVal;null==t&&r(new Date)}}]))},609:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaEmail=void 0;var a=r(589),i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"email",value:function(){return this.predicates.push({id:"email",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaEmail=o,a.Itsa.extend(o,{id:"email",validate:function(e){var t=e.val,r=e.type,n=e.result;if("string"!==r)return n.registerError("Expected email but found ".concat(r));i.test(t)||n.registerError("Email address is invalid")}})},151:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaEqual=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"equal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.example=e,this.predicates.push({id:"equal",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaEqual=i,a.Itsa.extend(i,{id:"equal",validate:function(e,t){var r,n=e.val,a=e.result,i=t.example;(null===(r=t.strict)||void 0===r||r?n===i:n==i)||a.registerError("Did not equal ".concat(i))}})},947:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaFalsy=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"falsy",value:function(){return this.predicates.push({id:"falsy",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaFalsy=i,a.Itsa.extend(i,{id:"falsy",validate:function(e){var t=e.val,r=e.result;if(t)return r.registerError("Expected falsy value.")}})},821:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaFunction=void 0;var a=r(589),i=r(28),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"function",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.length&&(e.length=i.primitiveToItsa(e.length)),this.predicates.push({id:"function",settings:e}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaFunction=o,a.Itsa.extend(o,{id:"function",validate:function(e,t){var r=e.val,n=e.type,a=e.result;if("function"!==n)return a.registerError("Expected function");if(t.length){var i=t.length._validate({key:"length",parent:null,val:r.length,exists:!0,settings:e.validation,path:e.path});a.registerResult(i)}}})},28:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.primitiveToItsa=void 0;var n=r(589);t.primitiveToItsa=function(e){return e instanceof n.Itsa?e:"function"==typeof e?n.itsa.constructorIs(e):n.itsa.equal(e)}},593:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaInstanceOf=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"instanceof",value:function(e){var t={cls:e};return this.predicates.push({id:"instanceof",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaInstanceOf=i,a.Itsa.extend(i,{id:"instanceof",validate:function(e,t){var r=e.val,n=e.result;r instanceof t.cls||n.registerError("Expected instance of ".concat(t.cls))}})},273:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaInteger=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"integer",value:function(){return this.predicates.push({id:"integer",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaInteger=i,a.Itsa.extend(i,{id:"integer",validate:function(e){var t=e.val,r=e.result;"number"==typeof t&&!1===isNaN(t)&&-1===[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY].indexOf(t)&&t%1==0||r.registerError("Invalid integer")}})},589:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function c(e){var t=p();return function(){var r,n=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){var t="function"==typeof Map?new Map:void 0;return(v=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return d(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)})(e)}function d(e,t,r){return(d=p()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&y(a,r.prototype),a}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),m=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||b(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.itsa=t.Itsa=t.ItsaValidationResultBuilder=t.ItsaValidationResult=t.ItsaValidationException=void 0;var g=function(e){s(r,e);var t=c(r);function r(e){var n;l(this,r),n=t.call(this);var a=e.errors[0].path.join(".");return n.message="".concat(a?"".concat(a,": "):"").concat(e.errors[0].message),n.result=e,n}return r}(v(Error));t.ItsaValidationException=g;var w=function(){function e(){l(this,e),this.ok=!0,this.errors=[]}return u(e,[{key:"okOrThrow",value:function(){if(!this.ok)throw new g(this)}},{key:"addError",value:function(e){this.ok=!1,this.message=e.message,this.errors.push(e)}},{key:"addResult",value:function(e){e.ok||(this.ok=!1);var t,r=a(e.errors);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.errors.push(n)}}catch(i){r.e(i)}finally{r.f()}if(!this.message&&this.errors.length){var i=this.errors[0];this.message=i.message,i.path&&i.path.length&&(this.message+=" (".concat((i.path||[]).join("."),")"))}}}]),e}();t.ItsaValidationResult=w;var I=function(e){s(r,e);var t=c(r);function r(e,n,a,i){var o;return l(this,r),(o=t.call(this)).ok=!0,o.errors=[],o.value=void 0,o.hint=void 0,o.message=void 0,o.key=n,o.exhaustive=e,o.path=a,o.hint=i,o}return u(r,[{key:"registerError",value:function(e){var t=new w,r=this.hint?"".concat(this.hint,": ").concat(e):e;t.addError({message:r,key:this.key,path:this.path}),this.addResult(t)}},{key:"registerResult",value:function(e){if(this.addResult(e),!this.exhaustive&&this.errors.length)throw"STOP_ON_FIRST_ERROR"}}]),r}(w);t.ItsaValidationResultBuilder=I;var j=function(){function e(){l(this,e),this.predicates=[]}return u(e,null,[{key:"extend",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var u=0,l=i;u<l.length;u++){var s=l[u];e.validators[s.id]=s}var c,f=Object.getOwnPropertyNames(r.prototype).filter((function(e){return"constructor"!==e})),v=a(f);try{var d=function(){var n=c.value,a=r.prototype[n];e.prototype[n]=a,"function"==typeof a&&(t.itsa[n]=function(){var t=new e;return t[n].apply(t,arguments)})};for(v.s();!(c=v.n()).done;)d()}catch(e){v.e(e)}finally{v.f()}}}]),e}();t.Itsa=j,j.validators={},t.itsa={predicates:[]},r(44),r(122),r(970),r(776),r(911),r(850),r(233),r(152),r(758),r(438),r(801),r(228),r(735),r(609),r(151),r(947),r(821),r(593),r(273),r(206),r(292),r(365),r(442),r(42),r(899),r(752),r(241),r(76),r(635),r(700),r(744),r(724),r(409),r(709),r(886),r(457),r(997),r(446),m(r(263),t)},206:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaLength=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"length",value:function(e,t){var r={min:e,max:t};return"number"==typeof e&&"number"!=typeof t&&(r={exactly:e}),"number"!=typeof e&&(r={min:1}),this.predicates.push({id:"length",settings:r}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaLength=i,a.Itsa.extend(i,{id:"length",validate:function(e,t){var r=e.val,n=e.result,a=r?r.length:null;return"number"!=typeof a?n.registerError("Invalid length"):"number"==typeof t.exactly&&t.exactly!==a?n.registerError("Expected length to be ".concat(t.exactly)):"number"==typeof t.min&&t.min>a?n.registerError("Expected length to be at least ".concat(t.min)):"number"==typeof t.max&&t.max<a?n.registerError("Expected length to be at most ".concat(t.max)):void 0}})},292:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaMatches=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"matches",value:function(e){var t={regex:e};return this.predicates.push({id:"matches",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaMatches=i,a.Itsa.extend(i,{id:"matches",validate:function(e,t){var r=e.val,n=e.result;t.regex.test(String(r))||n.registerError("Does not match ".concat(t.regex))}})},365:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaMax=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"max",value:function(e,t){var r,n={max:e,inclusive:t=null===(r=t)||void 0===r||r};return this.predicates.push({id:"max",settings:n}),this}},{key:"under",value:function(e,t){var r,n={max:e,inclusive:t=null!==(r=t)&&void 0!==r&&r};return this.predicates.push({id:"max",settings:n}),this}},{key:"below",value:function(e,t){var r,n={max:e,inclusive:t=null!==(r=t)&&void 0!==r&&r};return this.predicates.push({id:"max",settings:n}),this}},{key:"atMost",value:function(e,t){var r,n={max:e,inclusive:t=null===(r=t)||void 0===r||r};return this.predicates.push({id:"max",settings:n}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaMax=i,a.Itsa.extend(i,{id:"max",validate:function(e,t){var r=e.val,n=e.result,a=t.max;t.inclusive?r<=a||n.registerError("Value must be at most ".concat(a)):r<a||n.registerError("Value must be less than ".concat(a))}})},442:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaMin=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"min",value:function(e,t){var r,n={min:e,inclusive:t=null===(r=t)||void 0===r||r};return this.predicates.push({id:"min",settings:n}),this}},{key:"over",value:function(e,t){var r,n={min:e,inclusive:t=null!==(r=t)&&void 0!==r&&r};return this.predicates.push({id:"min",settings:n}),this}},{key:"above",value:function(e,t){var r,n={min:e,inclusive:t=null!==(r=t)&&void 0!==r&&r};return this.predicates.push({id:"min",settings:n}),this}},{key:"atLeast",value:function(e,t){var r,n={min:e,inclusive:t=null===(r=t)||void 0===r||r};return this.predicates.push({id:"min",settings:n}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaMin=i,a.Itsa.extend(i,{id:"min",validate:function(e,t){var r=e.val,n=e.result,a=t.min;t.inclusive?r>=a||n.registerError("Value must be at least ".concat(a)):r>a||n.registerError("Value must be greater than ".concat(a))}})},42:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaNotEmpty=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"notEmpty",value:function(){return this.predicates.push({id:"notEmpty",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaNotEmpty=i,a.Itsa.extend(i,{id:"notEmpty",validate:function(e){var t=e.val,r=e.result,n=t?t.length:null;if("number"!=typeof n||!n)if("[object Object]"!==Object.prototype.toString.call(t))r.registerError("Value cannot be empty");else{var a=!1;for(var i in t)if(t.hasOwnProperty(i)){a=!0;break}a||r.registerError("Object cannot be empty")}}})},899:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaNull=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"null",value:function(){return this.predicates.push({id:"equal",settings:{example:null,strict:!0}}),this}},{key:"undef",value:function(){var e={example:void 0,strict:!0};return this.predicates.push({id:"equal",settings:e}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaNull=i,a.Itsa.extend(i)},752:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaNumber=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"number",value:function(){return this.predicates.push({id:"number"}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaNumber=i,a.Itsa.extend(i,{id:"number",validate:function(e){var t=e.val,r=e.type,n=e.result;return"number"!==r?n.registerError("Expected number but type is ".concat(r,".")):isNaN(t)?n.registerError("Expected number but found NaN."):isFinite(t)?void 0:n.registerError("Expected number but found infinity.")}})},241:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaObject=void 0;var l=r(589),s=r(28),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"object",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;if(e)for(var n in r={},e)r[n]=s.primitiveToItsa(e[n]);t.key&&(t.key=s.primitiveToItsa(t.key)),t.value&&(t.value=s.primitiveToItsa(t.value));var a={example:r,config:t};return this.predicates.push({id:"object",settings:a}),this}},{key:"addProperty",value:function(e,t){for(var r=this.predicates.length-1;r>=0;r--){var n=this.predicates[r];if("object"===n.id){n.settings||(n.settings={}),n.settings.example||(n.settings.example={}),n.settings.config||(n.settings.config={}),n.settings.example[e]=s.primitiveToItsa(t);break}}return this}}])&&u(t.prototype,r),n&&u(t,n),e}();t.ItsaObject=c,l.Itsa.extend(c,{id:"object",builder:function(e){var t={},r=e.example;if(r)for(var n=0,a=Object.keys(r);n<a.length;n++){var i=a[n],o=r[i];t[i]=o.build()}return t},validate:function(e,t){var r,i=e.val,o=e.parent,u=e.validation,l=e.result,s=e.type,c=t.example,f=t.config,v=null!==(r=f.extras)&&void 0!==r&&r;if(!i)return l.registerError("Expected object but value is ".concat(i,"."));if("object"!==s)return l.registerError("Expected object but type is ".concat(s,"."));if(i instanceof RegExp)return l.registerError("Expected object but type is regex.");if(i instanceof Date)return l.registerError("Expected object but type is date.");if(Array.isArray(i))return l.registerError("Expected object but type is array.");var d=Object.keys(i);if(c){for(var p=Object.keys(c),y=0,h=p;y<h.length;y++){var b=h[y];if(o||!u.partial||d.includes(b)){var m=c[b]._validate({key:b,parent:i,val:i[b],exists:b in i,settings:u,path:[].concat(a(e.path),[b])});l.registerResult(m)}}if(!v){var g=d.filter((function(e){return!p.includes(e)}));g.length&&l.registerError("Extra unknown properties: ".concat(g.join(", ")))}}if(f.key){var w,I=n(d);try{for(I.s();!(w=I.n()).done;){var j=w.value,O=f.key._validate({key:j,parent:i,val:j,exists:!0,settings:u,path:[].concat(a(e.path),[j])});l.registerResult(O)}}catch(e){I.e(e)}finally{I.f()}}if(f.value){var E,x=n(d);try{for(x.s();!(E=x.n()).done;){var k=E.value,_=i[k],S=f.value._validate({key:k,parent:i,val:_,exists:!0,settings:u,path:[].concat(a(e.path),[k])});l.registerResult(S)}}catch(e){x.e(e)}finally{x.f()}}}})},76:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaObjectId=void 0;var a=r(589),i=/^[0-9a-f]{24}$/i,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"objectid",value:function(){return this.predicates.push({id:"objectid",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaObjectId=o,a.Itsa.extend(o,{id:"objectid",validate:function(e,t){var r=e.val,n=e.result,a=e.type;return r?"string"!==a?n.registerError("ObjectId must be a string"):24!==r.length?n.registerError("ObjectId must have 24 characters"):i.test(r)?void 0:n.registerError("ObjectId may only contain 0-9, a-z"):n.registerError("ObjectId is required")}})},635:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaOptional=void 0;var a=r(589),i=r(28),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"optional",value:function(e){var t={allowedSchema:i.primitiveToItsa(e)};return this.predicates.push({id:"optional",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaOptional=o,a.Itsa.extend(o,{id:"optional",validate:function(e,t){var r=e.key,n=e.parent,a=e.exists,i=e.validation,o=e.path,u=e.val,l=e.result;if(null!=u){var s=t.allowedSchema._validate({key:r,parent:n,val:u,exists:a,path:o,settings:i});return s.ok?void 0:l.registerError(s.message)}}})},700:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaSerialize=void 0;var a=r(589),i=function e(t){var r=Object.prototype.toString.call(t),n="[object Object]"===r;if(!n&&!("[object Array]"===r))return t;for(var i in t)t[i]=e(t[i]);if(n&&t.predicates){var o=new a.Itsa;return o.predicates=t.predicates,o}return t},o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"load",value:function(e){return this.predicates=i(e).predicates,this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaSerialize=o,a.Itsa.extend(o)},744:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaString=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"string",value:function(){return this.predicates.push({id:"string",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaString=i,a.Itsa.extend(i,{id:"string",validate:function(e){var t=e.type,r=e.result;if("string"!==t)return r.registerError("Expected string")}})},724:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaTo=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"toDate",value:function(){return this.predicates.push({id:"toDate",settings:null}),this}},{key:"toFloat",value:function(){return this.predicates.push({id:"toFloat",settings:null}),this}},{key:"toInt",value:function(e){var t={radix:e};return this.predicates.push({id:"toInt",settings:t}),this}},{key:"toLowerCase",value:function(){return this.predicates.push({id:"toLowerCase"}),this}},{key:"toUpperCase",value:function(){return this.predicates.push({id:"toUpperCase"}),this}},{key:"toNow",value:function(){return this.predicates.push({id:"toNow"}),this}},{key:"toString",value:function(){return this.predicates.push({id:"toString"}),this}},{key:"toTrimmed",value:function(){return this.predicates.push({id:"toTrimmed"}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaTo=i,a.Itsa.extend(i,{id:"toDate",validate:function(e){var t=e.val,r=e.setVal,n=e.result,a=new Date(t);if(!isFinite(a.getTime()))return n.registerError("Date conversion failed");r(a)}},{id:"toFloat",validate:function(e){var t=e.val,r=e.setVal,n=e.result,a=parseFloat(t);if(isNaN(a))return n.registerError("Float conversion failed");r(a)}},{id:"toInt",validate:function(e,t){var r=e.val,n=e.setVal,a=e.result,i=t.radix,o=parseInt(r,null!=i?i:10);if(isNaN(o))return a.registerError("Int conversion failed");n(o)}},{id:"toLowerCase",validate:function(e){var t=e.val;(0,e.setVal)(String(t).toLowerCase())}},{id:"toUpperCase",validate:function(e){var t=e.val;(0,e.setVal)(String(t).toUpperCase())}},{id:"toNow",validate:function(e){(0,e.setVal)(new Date)}},{id:"toString",validate:function(e){var t=e.val;(0,e.setVal)(String(t))}},{id:"toTrimmed",validate:function(e){var t=e.val;(0,e.setVal)(String(t).trim())}})},409:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(589),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"touch",value:function(e,t){var r=this.predicates.filter((function(e){return"object"===e.id}));if(!r.length)throw new Error("This is not an object schema.");if(!e)return e;var a,i=n(r);try{for(i.s();!(a=i.n()).done;){var o=a.value.settings.example;if(!o)throw new Error("A schema example is required.");for(var u=Object.keys(o),l=0,s=u;l<s.length;l++){var c=s[l];c in e||(t?t(c,e):e[c]=void 0)}}}catch(e){i.e(e)}finally{i.f()}return e}}])&&i(t.prototype,r),a&&i(t,a),e}();o.Itsa.extend(u)},709:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaTruthy=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"truthy",value:function(){return this.predicates.push({id:"truthy",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaTruthy=i,a.Itsa.extend(i,{id:"truthy",validate:function(e){var t=e.val,r=e.result;if(!t)return r.registerError("Expected truthy value.")}})},886:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaTypeOf=void 0;var i=r(589),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"typeof",value:function(e){var t={type:e};return this.predicates.push({id:"typeof",settings:t}),this}}])&&a(t.prototype,r),n&&a(t,n),e}();t.ItsaTypeOf=o,i.Itsa.extend(o,{id:"typeof",validate:function(e,t){var r=e.val,a=e.result,i=t.type;i!==n(r)&&a.registerError("Expected ".concat(i))}})},457:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaUnique=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"unique",value:function(e){var t={getter:e};return this.predicates.push({id:"unique",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaUnique=i,a.Itsa.extend(i,{id:"unique",validate:function(e,t){var r=e.val,n=e.result,a=t.getter,i=new Set;for(var o in r){var u=r[o];if(a&&(u=a(u)),i.has(u))return n.registerError("".concat(u," occurred multiple times"));i.add(u)}}})},997:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(589),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,(r=[{key:"_validate",value:function(e){var t=e.key,r=new u.ItsaValidationResultBuilder(e.settings.exhaustive,t,e.path,e.settings.hint);r.value=e.val;try{var i,o=function(t){e.parent?(e.parent[e.key]=t,e.val=t):r.value=t},l=a(this.predicates);try{for(l.s();!(i=l.n()).done;){var s=i.value,c=u.Itsa.validators[s.id];if(!c)throw new Error("Validator not found: ".concat(s.id));var f={setVal:o,result:r,val:e.val,key:e.key,parent:e.parent,exists:e.exists,type:n(e.val),validation:e.settings,path:e.path};if(c.validate(f,s.settings),!r.ok)return r}}catch(e){l.e(e)}finally{l.f()}}catch(e){if("STOP_ON_FIRST_ERROR"!==e)throw e}return r}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._validate({val:e,settings:t,key:null,parent:null,exists:!0,path:[]})}},{key:"validOrThrow",value:function(e,t){this.validate(e,t).okOrThrow()}}])&&o(t.prototype,r),i&&o(t,i),e}();u.Itsa.extend(l)},446:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaVerify=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"verify",value:function(e){var t={verifier:e};return this.predicates.push({id:"verify",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaVerify=i,a.Itsa.extend(i,{id:"verify",validate:function(e,t){var r=e.val,n=e.result,a=t.verifier;try{var i=a(r);if("boolean"==typeof i)return void(!1===i&&n.registerError("Value is invalid"));if("string"==typeof i)return n.registerError(i)}catch(e){if("STOP_ON_FIRST_ERROR"===e)throw e;return n.registerError(e)}}})}},t={};return function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(589)})()}));
//# sourceMappingURL=itsa.min.js.map