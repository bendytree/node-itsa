/*!
 * @license
 * itsa 2.1.163
 * Copyright 2023 Josh Wright <https://www.joshwright.com>
 * MIT LICENSE
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ItsaLib=t():e.ItsaLib=t()}(this,(function(){return(()=>{"use strict";var e={44:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(589),u=r(28),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"all",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a,i=t.flat().map((function(e){return u.primitiveToItsa(e)})),o=n(i);try{for(o.s();!(a=o.n()).done;){var l,c=a.value,s=n(c.predicates);try{for(s.s();!(l=s.n()).done;){var f=l.value;this.predicates.push(f)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){o.e(e)}finally{o.f()}return this}}])&&i(t.prototype,r),a&&i(t,a),e}();o.Itsa.extend(l)},122:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaAnd=void 0;var o=r(589),u=r(28),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"and",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a,i=t.flat().map((function(e){return u.primitiveToItsa(e)})),o=n(i);try{for(o.s();!(a=o.n()).done;){var l,c=a.value,s=n(c.predicates);try{for(s.s();!(l=s.n()).done;){var f=l.value;this.predicates.push(f)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){o.e(e)}finally{o.f()}return this}}])&&i(t.prototype,r),a&&i(t,a),e}();t.ItsaAnd=l,o.Itsa.extend(l)},970:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(589),u=r(28),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"any",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.flat().map((function(e){return u.primitiveToItsa(e)})),a={schemas:n};return this.predicates.push({id:"any",settings:a}),this}}])&&i(t.prototype,r),n&&i(t,n),e}(),c={id:"any",validate:function(e,t){var r=e.key,a=e.val,i=e.parent,o=e.validation,u=e.exists,l=e.result,c=t.schemas;if(0!==c.length){var s,f=[],v=n(c);try{for(v.s();!(s=v.n()).done;){var y=s.value,p=y.predicates.find((function(e){return!["equal","falsy"].includes(e.id)})),d=y._validate({key:r,parent:i,val:a,exists:u,settings:o,path:e.path});if(d.ok)return;p&&f.push(d.message)}}catch(e){v.e(e)}finally{v.f()}1===f.length?l.registerError(f[0],a):l.registerError("No schemas matched.",a)}}};o.Itsa.extend(l,c)},776:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaAnything=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"anything",value:function(){return this.predicates.push({id:"anything",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaAnything=i,a.Itsa.extend(i,{id:"anything",validate:function(e){}})},911:(e,t,r)=>{function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaArray=void 0;var o=r(589),u=r(28),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"array",value:function(e){var t={example:e?u.primitiveToItsa(e):null};return this.predicates.push({id:"array",settings:t}),this}}])&&i(t.prototype,r),n&&i(t,n),e}();t.ItsaArray=l,o.Itsa.extend(l,{id:"array",builder:function(e){return[]},validate:function(e,t){var r=e.val,a=e.validation,i=e.exists,o=e.result,u=e.type,l=t.example;if(!Array.isArray(r))return o.registerError("Expected array but found ".concat(u),r);if(l&&r.length)for(var c=0;c<r.length;c++){var s=r[c],f=l._validate({key:c,parent:r,val:s,exists:i,settings:a,path:[].concat(n(e.path),[c])});o.registerResult(f)}}})},850:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaBetween=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"between",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r;return n.min=e,n.max=t,this.predicates.push({id:"between",settings:n}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaBetween=i,a.Itsa.extend(i,{id:"between",validate:function(e,t){var r,n=e.val,a=e.result,i=t.min,o=t.max,u=null===(r=t.inclusive)||void 0===r||r;(u?n<i:n<=i)&&a.registerError("Value cannot be under ".concat(i),n),(u?n>o:n>=o)&&a.registerError("Value cannot be above ".concat(o),n)}})},233:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaBoolean=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"boolean",value:function(){return this.predicates.push({id:"boolean",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaBoolean=i,a.Itsa.extend(i,{id:"boolean",validate:function(e){var t=e.type,r=e.result,n=e.val;"boolean"!==t&&r.registerError("Expected bool but found ".concat(t),n)}})},152:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var u=r(589);var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"build",value:function(e){var t=function(e){var t,r=i(e.predicates);try{for(r.s();!(t=r.n()).done;){var n=t.value,a=u.Itsa.validators[n.id];if(a.builder)return a.builder(n.settings)}}catch(e){r.e(e)}finally{r.f()}}(this);return t&&"object"===n(t)&&e&&"object"===n(e)&&Object.assign(t,e),t}}])&&a(t.prototype,r),o&&a(t,o),e}();u.Itsa.extend(l)},499:(e,t)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=void 0,t.deepClone=function(e){return(e=e||{}).circles?function(e){var t=[],a=[];return e.proto?u:o;function i(e,i){for(var o=Object.keys(e),u=new Array(o.length),l=0;l<o.length;l++){var c=o[l],s=e[c];if("object"!==r(s)||null===s)u[c]=s;else if(s instanceof Date)u[c]=new Date(s);else if(ArrayBuffer.isView(s))u[c]=n(s);else{var f=t.indexOf(s);u[c]=-1!==f?a[f]:i(s)}}return u}function o(e){if("object"!==r(e)||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return i(e,o);if(e instanceof Map)return new Map(i(Array.from(e),o));if(e instanceof Set)return new Set(i(Array.from(e),o));var u={};for(var l in t.push(e),a.push(u),e)if(!1!==Object.hasOwnProperty.call(e,l)){var c=e[l];if("object"!==r(c)||null===c)u[l]=c;else if(c instanceof Date)u[l]=new Date(c);else if(c instanceof Map)u[l]=new Map(i(Array.from(c),o));else if(c instanceof Set)u[l]=new Set(i(Array.from(c),o));else if(ArrayBuffer.isView(c))u[l]=n(c);else{var s=t.indexOf(c);u[l]=-1!==s?a[s]:o(c)}}return t.pop(),a.pop(),u}function u(e){if("object"!==r(e)||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return i(e,u);if(e instanceof Map)return new Map(i(Array.from(e),u));if(e instanceof Set)return new Set(i(Array.from(e),u));var o={};for(var l in t.push(e),a.push(o),e){var c=e[l];if("object"!==r(c)||null===c)o[l]=c;else if(c instanceof Date)o[l]=new Date(c);else if(c instanceof Map)o[l]=new Map(i(Array.from(c),u));else if(c instanceof Set)o[l]=new Set(i(Array.from(c),u));else if(ArrayBuffer.isView(c))o[l]=n(c);else{var s=t.indexOf(c);o[l]=-1!==s?a[s]:u(c)}}return t.pop(),a.pop(),o}}(e):e.proto?function e(a){if("object"!==r(a)||null===a)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return t(a,e);if(a instanceof Map)return new Map(t(Array.from(a),e));if(a instanceof Set)return new Set(t(Array.from(a),e));var i={};for(var o in a){var u=a[o];"object"!==r(u)||null===u?i[o]=u:u instanceof Date?i[o]=new Date(u):u instanceof Map?i[o]=new Map(t(Array.from(u),e)):u instanceof Set?i[o]=new Set(t(Array.from(u),e)):ArrayBuffer.isView(u)?i[o]=n(u):i[o]=e(u)}return i}:function e(a){if("object"!==r(a)||null===a)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return t(a,e);if(a instanceof Map)return new Map(t(Array.from(a),e));if(a instanceof Set)return new Set(t(Array.from(a),e));var i={};for(var o in a)if(!1!==Object.hasOwnProperty.call(a,o)){var u=a[o];"object"!==r(u)||null===u?i[o]=u:u instanceof Date?i[o]=new Date(u):u instanceof Map?i[o]=new Map(t(Array.from(u),e)):u instanceof Set?i[o]=new Set(t(Array.from(u),e)):u instanceof RegExp?i[o]=u:ArrayBuffer.isView(u)?i[o]=n(u):i[o]=e(u)}return i};function t(e,t){for(var a=Object.keys(e),i=new Array(a.length),o=0;o<a.length;o++){var u=a[o],l=e[u];"object"!==r(l)||null===l?i[u]=l:l instanceof Date?i[u]=new Date(l):ArrayBuffer.isView(l)?i[u]=n(l):i[u]=t(l)}return i}}({proto:!1,circles:!1})},758:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaClone=void 0;var a=r(589),i=r(499),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"clone",value:function(){var e=i.deepClone(this);return a.itsa.load(e)}}])&&n(t.prototype,r),o&&n(t,o),e}();t.ItsaClone=o,a.Itsa.extend(o)},438:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaConstructor=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"constructorIs",value:function(e){var t={cls:e};return this.predicates.push({id:"constructor",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaConstructor=i,a.Itsa.extend(i,{id:"constructor",validate:function(e,t){var r=e.val,n=e.result;if(!(null!=r&&r.constructor===t.cls))return n.registerError("Expected to be ".concat(t.cls),r)}})},801:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaConvert=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"convert",value:function(e){var t={converter:e};return this.predicates.push({id:"convert",settings:t}),this}},{key:"to",value:function(e){var t={converter:e};return this.predicates.push({id:"convert",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaConvert=i,a.Itsa.extend(i,{id:"convert",validate:function(e,t){var r=e.val,n=e.setVal,a=e.result,i=t.converter;if("function"==typeof i)try{n(i(r))}catch(e){a.registerError(e,r)}}})},228:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaDate=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"date",value:function(){return this.predicates.push({id:"date",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaDate=i,a.Itsa.extend(i,{id:"date",validate:function(e){var t=e.val,r=e.result,n=Object.prototype.toString.call(t);if("[object Date]"!==n)return r.registerError("Expected date but found ".concat(n),t);isFinite(t)||r.registerError("Date is not valid",t)}})},263:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.itsaField=t.itsaSchema=t.ItsaSchema=void 0;var i=r(589);t.ItsaSchema=function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.constructor.schema.build(t)},t.itsaSchema=function(e){return function(t){t.schema&&e?function(e,t){var r,a=n(t.predicates);try{for(a.s();!(r=a.n()).done;){var i=r.value;if("object"===i.id){var o=i.settings;if(o.example)for(var u=0,l=Object.keys(o.example);u<l.length;u++){var c=l[u];e.addProperty(c,o.example[c])}}else e.predicates.push(i)}}catch(e){a.e(e)}finally{a.f()}t.predicates.find((function(e){var t,r;return"object"===e.id&&!0===(null===(t=e.settings)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.extras)}))&&e.predicates.filter((function(e){return"object"===e.id})).forEach((function(e){return e.settings.config.extras=!0}))}(t.schema,e):e?t.schema=e:t.schema||(t.schema=i.itsa.object({}))}},t.itsaField=function(e){if(void 0===e)throw new Error("itsaField schema may not be undefined");return function(t,r){var n=t.constructor;if(!Object.getOwnPropertyDescriptor(n,"schema")){var a=n.schema;n.schema=a?a.clone():i.itsa.object({})}n.schema.addProperty(r,e)}}},735:(e,t,r)=>{var n;function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaDefault=void 0;var i=r(589),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"default",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.val=e,this.predicates.push({id:"default",settings:t}),this}},{key:"defaultNow",value:function(){return this.predicates.push({id:"defaultNow",settings:null}),this}}])&&a(t.prototype,r),n&&a(t,n),e}();t.ItsaDefault=o,(n=i.Itsa).extend.apply(n,[o].concat([{id:"default",builder:function(e){return e.val},validate:function(e,t){var r,n=e.val,a=e.setVal;(null!==(r=t.falsy)&&void 0!==r&&r?!n:null==n)&&a(t.val)}},{id:"defaultNow",builder:function(e){return new Date},validate:function(e){var t=e.val,r=e.setVal;null==t&&r(new Date)}}]))},609:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaEmail=void 0;var a=r(589),i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"email",value:function(){return this.predicates.push({id:"email",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaEmail=o,a.Itsa.extend(o,{id:"email",validate:function(e){var t=e.val,r=e.type,n=e.result;if("string"!==r)return n.registerError("Expected email but found ".concat(r),t);i.test(t)||n.registerError("Email address is invalid",t)}})},151:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaEqual=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"equal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.example=e,this.predicates.push({id:"equal",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaEqual=i,a.Itsa.extend(i,{id:"equal",validate:function(e,t){var r,n=e.val,a=e.result,i=t.example;(null===(r=t.strict)||void 0===r||r?n===i:n==i)||a.registerError("Did not equal ".concat(i),n)}})},229:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaExtend=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"extend",value:function(e){return e(this),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaExtend=i,a.Itsa.extend(i)},947:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaFalsy=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"falsy",value:function(){return this.predicates.push({id:"falsy",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaFalsy=i,a.Itsa.extend(i,{id:"falsy",validate:function(e){var t=e.val,r=e.result;if(t)return r.registerError("Expected falsy value.",t)}})},821:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaFunction=void 0;var a=r(589),i=r(28),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"function",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.length&&(e.length=i.primitiveToItsa(e.length)),this.predicates.push({id:"function",settings:e}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaFunction=o,a.Itsa.extend(o,{id:"function",validate:function(e,t){var r=e.val,n=e.type,a=e.result;if("function"!==n)return a.registerError("Expected function",r);if(t.length){var i=t.length._validate({key:"length",parent:null,val:r.length,exists:!0,settings:e.validation,path:e.path});a.registerResult(i)}}})},164:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaGet=void 0;var o=r(589),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"get",value:function(e){var t,r=o.itsa.any(),a=n(this.predicates);try{for(a.s();!(t=a.n()).done;){var i=t.value;if("object"===i.id){var u=i.settings;if(u.example&&u.example[e]){var l=u.example[e];r.and(l)}}}}catch(e){a.e(e)}finally{a.f()}return r}}])&&i(t.prototype,r),a&&i(t,a),e}();t.ItsaGet=u,o.Itsa.extend(u)},28:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.primitiveToItsa=void 0;var n=r(589);t.primitiveToItsa=function(e){return e instanceof n.Itsa?e:"function"==typeof e?n.itsa.constructorIs(e):n.itsa.equal(e)}},593:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaInstanceOf=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"instanceof",value:function(e){var t={cls:e};return this.predicates.push({id:"instanceof",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaInstanceOf=i,a.Itsa.extend(i,{id:"instanceof",validate:function(e,t){var r=e.val,n=e.result;r instanceof t.cls||n.registerError("Expected instance of ".concat(t.cls),r)}})},273:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaInteger=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"integer",value:function(){return this.predicates.push({id:"integer",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaInteger=i,a.Itsa.extend(i,{id:"integer",validate:function(e){var t=e.val,r=e.result;"number"==typeof t&&!1===isNaN(t)&&-1===[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY].indexOf(t)&&t%1==0||r.registerError("Invalid integer",t)}})},589:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function s(e){var t=p();return function(){var r,n=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){var t="function"==typeof Map?new Map:void 0;return(v=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return y(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)})(e)}function y(e,t,r){return(y=p()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&d(a,r.prototype),a}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),m=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||b(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.itsa=t.Itsa=t.ItsaValidationResultBuilder=t.ItsaValidationResult=t.ItsaValidationException=void 0;var g=function(e){c(r,e);var t=s(r);function r(e){var n;l(this,r),n=t.call(this);var a=e.errors[0].path.join(".");return n.message="".concat(a?"".concat(a,": "):"").concat(e.errors[0].message),n.result=e,n}return r}(v(Error));t.ItsaValidationException=g;var w=function(){function e(){l(this,e),this.ok=!0,this.errors=[]}return u(e,[{key:"okOrThrow",value:function(){if(!this.ok)throw new g(this)}},{key:"addError",value:function(e){this.ok=!1,this.message=e.message,this.errors.push(e)}},{key:"addResult",value:function(e){e.ok||(this.ok=!1);var t,r=a(e.errors);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.errors.push(n)}}catch(i){r.e(i)}finally{r.f()}if(!this.message&&this.errors.length){var i=this.errors[0];this.message=i.message}}}]),e}();t.ItsaValidationResult=w;var j=function(e){c(r,e);var t=s(r);function r(e,n,a,i){var o;return l(this,r),(o=t.call(this)).ok=!0,o.errors=[],o.value=void 0,o.hint=void 0,o.message=void 0,o.key=n,o.exhaustive=e,o.path=a,o.hint=i,o}return u(r,[{key:"registerError",value:function(e,t){var r,n;e=this.hint?"".concat(this.hint,": ").concat(e):e;var a=new w,i=null===(r=this.path)||void 0===r||null===(n=r.join)||void 0===n?void 0:n.call(r,".");if(this.messageFormat){var o=(e=this.messageFormat.replace("{message}",e).replace("{msg}",e).replace("{path}",i)).split("{data}");o.length>1&&(e=o.join(JSON.stringify(t)))}else i&&(e="".concat(i,": ").concat(e));a.addError({message:e,key:this.key,path:this.path}),this.addResult(a)}},{key:"registerResult",value:function(e){if(this.addResult(e),!this.exhaustive&&this.errors.length)throw"STOP_ON_FIRST_ERROR"}},{key:"withMessageFormat",value:function(e){return this.messageFormat=e,this}}]),r}(w);t.ItsaValidationResultBuilder=j;var I=function(){function e(){l(this,e),this.predicates=[]}return u(e,null,[{key:"extend",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var u=0,l=i;u<l.length;u++){var c=l[u];e.validators[c.id]=c}var s,f=Object.getOwnPropertyNames(r.prototype).filter((function(e){return"constructor"!==e})),v=a(f);try{var y=function(){var n=s.value,a=r.prototype[n];e.prototype[n]=a,"function"==typeof a&&(t.itsa[n]=function(){var t=new e;return t[n].apply(t,arguments)})};for(v.s();!(s=v.n()).done;)y()}catch(e){v.e(e)}finally{v.f()}}}]),e}();t.Itsa=I,I.validators={},t.itsa={predicates:[]},r(44),r(122),r(970),r(776),r(911),r(850),r(233),r(152),r(758),r(438),r(801),r(228),r(735),r(609),r(151),r(229),r(947),r(821),r(593),r(273),r(873),r(206),r(292),r(365),r(377),r(442),r(42),r(899),r(752),r(241),r(76),r(635),r(354),r(185),r(700),r(744),r(724),r(409),r(709),r(886),r(457),r(997),r(446),r(164),r(243),m(r(263),t)},873:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return s(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,i=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return i}(e,t)||l(e,t)||u()}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e){return s(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaKeep=void 0;var f=r(589),v=function(e,t,r){var n,u=t.map((function(e){var t=o(e.split("."));return{key:t[0],rest:t.slice(1)}})),l=i(e.predicates);try{for(l.s();!(n=l.n()).done;){var c=n.value;if("object"===c.id){for(var s=c.settings,y=[],p=function(){var e=h[d],t=s.example[e],n=u.filter((function(t){return t.key===e}));if(n.length){var o,l=i(n);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.rest.length&&v(t,c.rest,r)}}catch(e){l.e(e)}finally{l.f()}}else if(r.partial){var p,b=i(t.predicates.entries());try{for(b.s();!(p=b.n()).done;){var m=a(p.value,2),g=m[0],w=m[1];if("optional"!==w.id){var j=new f.Itsa;j.predicates=[w],t.predicates[g]={id:"optional",settings:{allowedSchema:j}}}}}catch(e){b.e(e)}finally{b.f()}}else y.push(e)},d=0,h=Object.keys(s.example);d<h.length;d++)p();for(var b=0,m=y;b<m.length;b++){var g=m[b];delete s.example[g]}}}}catch(e){l.e(e)}finally{l.f()}},y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"keep",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("fields parameter is required");var r=this.clone();return v(r,e,t),r}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaKeep=y,f.Itsa.extend(y)},206:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaLength=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"length",value:function(e,t){var r={min:e,max:t};return"number"==typeof e&&"number"!=typeof t&&(r={exactly:e}),"number"!=typeof e&&(r={min:1}),this.predicates.push({id:"length",settings:r}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaLength=i,a.Itsa.extend(i,{id:"length",validate:function(e,t){var r=e.val,n=e.result,a=r?r.length:null;return"number"!=typeof a?n.registerError("Invalid length",r):"number"==typeof t.exactly&&t.exactly!==a?n.registerError("Expected length to be ".concat(t.exactly),r):"number"==typeof t.min&&t.min>a?n.registerError("Expected length to be at least ".concat(t.min),r):"number"==typeof t.max&&t.max<a?n.registerError("Expected length to be at most ".concat(t.max),r):void 0}})},292:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaMatches=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"matches",value:function(e){var t={regex:e};return this.predicates.push({id:"matches",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaMatches=i,a.Itsa.extend(i,{id:"matches",validate:function(e,t){var r=e.val,n=e.result;t.regex.test(String(r))||n.registerError("Does not match ".concat(t.regex),r)}})},365:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaMax=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"max",value:function(e,t){var r,n={max:e,inclusive:t=null===(r=t)||void 0===r||r};return this.predicates.push({id:"max",settings:n}),this}},{key:"under",value:function(e,t){var r,n={max:e,inclusive:t=null!==(r=t)&&void 0!==r&&r};return this.predicates.push({id:"max",settings:n}),this}},{key:"below",value:function(e,t){var r,n={max:e,inclusive:t=null!==(r=t)&&void 0!==r&&r};return this.predicates.push({id:"max",settings:n}),this}},{key:"atMost",value:function(e,t){var r,n={max:e,inclusive:t=null===(r=t)||void 0===r||r};return this.predicates.push({id:"max",settings:n}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaMax=i,a.Itsa.extend(i,{id:"max",validate:function(e,t){var r=e.val,n=e.result,a=t.max;t.inclusive?r<=a||n.registerError("Value must be at most ".concat(a),r):r<a||n.registerError("Value must be less than ".concat(a),r)}})},377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(589);n.Itsa.prototype.message=n.Itsa.prototype.msg=function(e){var t=this.predicates[this.predicates.length-1];return t.settings=t.settings||{},t.settings._message=e,this}},442:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaMin=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"min",value:function(e,t){var r,n={min:e,inclusive:t=null===(r=t)||void 0===r||r};return this.predicates.push({id:"min",settings:n}),this}},{key:"over",value:function(e,t){var r,n={min:e,inclusive:t=null!==(r=t)&&void 0!==r&&r};return this.predicates.push({id:"min",settings:n}),this}},{key:"above",value:function(e,t){var r,n={min:e,inclusive:t=null!==(r=t)&&void 0!==r&&r};return this.predicates.push({id:"min",settings:n}),this}},{key:"atLeast",value:function(e,t){var r,n={min:e,inclusive:t=null===(r=t)||void 0===r||r};return this.predicates.push({id:"min",settings:n}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaMin=i,a.Itsa.extend(i,{id:"min",validate:function(e,t){var r=e.val,n=e.result,a=t.min;t.inclusive?r>=a||n.registerError("Value must be at least ".concat(a),r):r>a||n.registerError("Value must be greater than ".concat(a),r)}})},42:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaNotEmpty=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"notEmpty",value:function(){return this.predicates.push({id:"notEmpty",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaNotEmpty=i,a.Itsa.extend(i,{id:"notEmpty",validate:function(e){var t=e.val,r=e.result,n=t?t.length:null;if("number"!=typeof n||!n)if("[object Object]"!==Object.prototype.toString.call(t))r.registerError("Value cannot be empty",t);else{var a=!1;for(var i in t)if(t.hasOwnProperty(i)){a=!0;break}a||r.registerError("Object cannot be empty",t)}}})},899:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaNull=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"null",value:function(){return this.predicates.push({id:"equal",settings:{example:null,strict:!0}}),this}},{key:"undef",value:function(){var e={example:void 0,strict:!0};return this.predicates.push({id:"equal",settings:e}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaNull=i,a.Itsa.extend(i)},752:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaNumber=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"number",value:function(){return this.predicates.push({id:"number"}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaNumber=i,a.Itsa.extend(i,{id:"number",validate:function(e){var t=e.val,r=e.type,n=e.result;return"number"!==r?n.registerError("Expected number but type is ".concat(r,"."),t):isNaN(t)?n.registerError("Expected number but found NaN.",t):isFinite(t)?void 0:n.registerError("Expected number but found infinity.",t)}})},241:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaObject=void 0;var l=r(589),c=r(28),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"object",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;if(e)for(var n in r={},e)r[n]=c.primitiveToItsa(e[n]);t.key&&(t.key=c.primitiveToItsa(t.key)),t.value&&(t.value=c.primitiveToItsa(t.value));var a={example:r,config:t};return this.predicates.push({id:"object",settings:a}),this}},{key:"addProperty",value:function(e,t){for(var r=this.predicates.length-1;r>=0;r--){var n=this.predicates[r];if("object"===n.id){n.settings||(n.settings={}),n.settings.example||(n.settings.example={}),n.settings.config||(n.settings.config={}),n.settings.example[e]=c.primitiveToItsa(t);break}}return this}}])&&u(t.prototype,r),n&&u(t,n),e}();t.ItsaObject=s,l.Itsa.extend(s,{id:"object",builder:function(e){var t={},r=e.example;if(r)for(var n=0,a=Object.keys(r);n<a.length;n++){var i=a[n],o=r[i];t[i]=o.build()}return t},validate:function(e,t){var r,i=e.val,o=(e.parent,e.validation),u=e.result,l=e.type,c=t.example,s=t.config,f=null!==(r=s.extras)&&void 0!==r&&r;if(!i)return u.registerError("Expected object but value is ".concat(i,"."),i);if("object"!==l)return u.registerError("Expected object but type is ".concat(l,"."),i);if(i instanceof RegExp)return u.registerError("Expected object but type is regex.",i);if(i instanceof Date)return u.registerError("Expected object but type is date.",i);if(Array.isArray(i))return u.registerError("Expected object but type is array.",i);var v=Object.keys(i);if(c){for(var y=Object.keys(c),p=0,d=y;p<d.length;p++){var h=d[p],b=void 0===i[h];if(!(o.partial||s.partial)||!b){var m=c[h]._validate({key:h,parent:i,val:i[h],exists:h in i,settings:o,path:[].concat(a(e.path),[h])});u.registerResult(m)}}if(!f){var g=v.filter((function(e){return!y.includes(e)}));g.length&&u.registerError("Extra unknown properties: ".concat(g.join(", ")),i)}}if(s.key){var w,j=n(v);try{for(j.s();!(w=j.n()).done;){var I=w.value,O=s.key._validate({key:I,parent:i,val:I,exists:!0,settings:o,path:[].concat(a(e.path),[I])});u.registerResult(O)}}catch(e){j.e(e)}finally{j.f()}}if(s.value){var x,S=n(v);try{for(S.s();!(x=S.n()).done;){var E=x.value,k=i[E],A=s.value._validate({key:E,parent:i,val:k,exists:!0,settings:o,path:[].concat(a(e.path),[E])});u.registerResult(A)}}catch(e){S.e(e)}finally{S.f()}}}})},76:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaObjectId=void 0;var a=r(589),i=/^[0-9a-f]{24}$/i,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"objectid",value:function(){return this.predicates.push({id:"objectid",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaObjectId=o,a.Itsa.extend(o,{id:"objectid",validate:function(e,t){var r=e.val,n=e.result,a=e.type;return r?"string"!==a?n.registerError("ObjectId must be a string",r):24!==r.length?n.registerError("ObjectId must have 24 characters",r):i.test(r)?void 0:n.registerError("ObjectId may only contain 0-9, a-z",r):n.registerError("ObjectId is required",r)}})},243:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=r(589);var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"toOpenApiSchema",value:function(){var e,t=this,r=this.predicates.flatMap((function(e){var t,r;return"optional"===e.id?(null===(t=e.settings)||void 0===t||null===(r=t.allowedSchema)||void 0===r?void 0:r.predicates)||[]:e})),o={},u=i(r);try{for(u.s();!(e=u.n()).done;){var c=e.value;o[c.id]=c}}catch(e){u.e(e)}finally{u.f()}var s=function(){if(o.object){var e,r={},u=[],c=i(t.keys());try{for(c.s();!(e=c.n()).done;){var s=e.value,f=t.get(s);f.isRequired()&&u.push(s),r[s]=f.toOpenApiSchema()}}catch(e){c.e(e)}finally{c.f()}return{type:"object",required:u,properties:r}}if(o.array){var v,y=null===(v=o.array.settings)||void 0===v?void 0:v.example;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:"array"},y?{items:y.toOpenApiSchema()}:{})}if(o.string||o.email){var p={type:"string"};if(o.email&&(p.format="email"),o.matches){var d,h=(null===(d=o.matches.settings)||void 0===d?void 0:d.regex).toString().match(/^\/(.*?)\/([gimyus]*)$/);h&&(p.pattern=h[1])}return p}if(o.number)return{type:"number"};if(o.integer)return{type:"integer"};if(o.boolean)return{type:"boolean"};if(o.null)return{type:"null"};if(o.objectid)return{type:"string",minLength:24,maxLength:24,pattern:"^[0-9a-f]$"};if(o.date)return{type:"date",format:"date-time"};if(o.equal){var b=o.equal.settings.example;return{type:function(e){return"string"==typeof e?"string":"number"==typeof e?e%1==0?"integer":"number":"boolean"==typeof e?"boolean":null==e?"null":Array.isArray(e)?"array":"object"===l(e)?"object":void 0}(b),const:b}}if(o.any){var m,g,w=(null===(m=o.any)||void 0===m||null===(g=m.settings)||void 0===g?void 0:g.schemas)||[];if(1===w.length)return w[0].toOpenApiSchema();if(w.length>1){var j=w.map((function(e){return e.toOpenApiSchema()})),I=j[0].type,O=!j.find((function(e){return e.type!==I})),x=!j.find((function(e){return!("const"in e)}));return O&&x&&["string","number","integer"].includes(I)?{type:I,enum:j.map((function(e){return e.const}))}:{oneOf:w.map((function(e){return e.toOpenApiSchema()}))}}}return o.anything?null:void 0}();if(!s)return s;if(o.notEmpty&&(s.minLength=1),o.length){var f,v=(null===(f=o.length)||void 0===f?void 0:f.settings)||{},y=v.exactly,p=v.min,d=v.max;"number"==typeof p&&(s.minLength=p),"number"==typeof d&&(s.maxLength=d),"number"==typeof y&&(s.minLength=y,s.maxLength=y)}if(o.between){var h,b=o.between.settings,m=b.min,g=b.max;null===(h=o.between.settings.inclusive)||void 0===h||h?(s.minimum=m,s.maximum=g):(s.exclusiveMinimum=m,s.exclusiveMaximum=g)}if(o.min){var w,j=o.min.settings.min;null===(w=o.min.settings.inclusive)||void 0===w||w?s.minimum=j:s.exclusiveMinimum=j}if(o.max){var I,O=o.max.settings.max;null===(I=o.max.settings.inclusive)||void 0===I||I?s.maximum=O:s.exclusiveMaximum=O}return o.equal&&(s.const=o.equal.settings.example),s}}])&&u(t.prototype,r),o&&u(t,o),e}();c.Itsa.extend(s)},635:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaOptional=void 0;var u=r(589),l=r(28),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"isRequired",value:function(){return!this.predicates.find((function(e){return"optional"===e.id}))}},{key:"optional",value:function(e){var t={allowedSchema:l.primitiveToItsa(e)};return this.predicates.push({id:"optional",settings:t}),this}}])&&o(t.prototype,r),n&&o(t,n),e}();t.ItsaOptional=c,u.Itsa.extend(c,{id:"optional",validate:function(e,t){var r=e.key,i=e.parent,o=e.exists,u=e.validation,l=e.path,c=e.val,s=e.result;if(null!=c){var f,v=[],y=a(t.allowedSchema.predicates);try{for(y.s();!(f=y.n()).done;){var p=f.value;"string"===p.id&&v.push("string"),"number"===p.id&&v.push("number"),"integer"===p.id&&v.push("number")}}catch(e){y.e(e)}finally{y.f()}if(c||!v.includes(n(c))){var d=t.allowedSchema._validate({key:r,parent:i,val:c,exists:o,path:l,settings:u});return d.ok?void 0:s.addResult(d)}}}})},354:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return u(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,i=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return i}(e,t)||c(e,t)||o()}function i(e){return u(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){if(Array.isArray(e))return e}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaPartialed=void 0;var v=r(589),y=function e(t,r){Object.keys(t).forEach((function(n){var a=t[n];r(a),a&&"object"===f(a)&&e(a,r)}))},p=function e(t,r){var n,o=l(t.predicates);try{for(o.s();!(n=o.n()).done;){var u=n.value;if("object"===u.id){var c=u.settings;if(r){var s,f=l(r);try{for(f.s();!(s=f.n()).done;){var p=i(s.value.split(".")),d=p[0],h=p.slice(1),b=c.example[d];if(b)if(h.length)e(b,[h.join(".")]);else{var m,g,w=l(null===(m=b.predicates)||void 0===m?void 0:m.entries());try{for(w.s();!(g=w.n()).done;){var j=a(g.value,2),I=j[0],O=j[1];if("optional"!==O.id){var x=new v.Itsa;x.predicates=[O],b.predicates[I]={id:"optional",settings:{allowedSchema:x}}}}}catch(e){w.e(e)}finally{w.f()}}}}catch(e){f.e(e)}finally{f.f()}}else c.config.partial=!0}r||y(u,(function(t){t instanceof v.Itsa&&e(t)}))}}catch(e){o.e(e)}finally{o.f()}},d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"partialed",value:function(e){var t=this.clone();return p(t,e),t}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaPartialed=d,v.Itsa.extend(d)},185:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaSchema=void 0;var o=r(589),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"schema",value:function(e){var t,r=n(e.predicates);try{for(r.s();!(t=r.n()).done;){var a=t.value;this.predicates.push(a)}}catch(e){r.e(e)}finally{r.f()}return this}}])&&i(t.prototype,r),a&&i(t,a),e}();t.ItsaSchema=u,o.Itsa.extend(u)},700:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaSerialize=void 0;var a=r(589),i=function e(t){var r=Object.prototype.toString.call(t),n="[object Object]"===r;if(!n&&!("[object Array]"===r))return t;for(var i in t)t[i]=e(t[i]);if(n&&t.predicates){var o=new a.Itsa;return o.predicates=t.predicates,o}return t},o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"load",value:function(e){return this.predicates=i(e).predicates,this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaSerialize=o,a.Itsa.extend(o)},744:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaString=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"string",value:function(){return this.predicates.push({id:"string",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaString=i,a.Itsa.extend(i,{id:"string",validate:function(e){var t=e.type,r=e.result,n=e.val;if("string"!==t)return r.registerError("Expected string",n)}})},724:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaTo=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"toDate",value:function(){return this.predicates.push({id:"toDate",settings:null}),this}},{key:"toFloat",value:function(){return this.predicates.push({id:"toFloat",settings:null}),this}},{key:"toInt",value:function(e){var t={radix:e};return this.predicates.push({id:"toInt",settings:t}),this}},{key:"toLowerCase",value:function(){return this.predicates.push({id:"toLowerCase"}),this}},{key:"toUpperCase",value:function(){return this.predicates.push({id:"toUpperCase"}),this}},{key:"toNow",value:function(){return this.predicates.push({id:"toNow"}),this}},{key:"toString",value:function(){return this.predicates.push({id:"toString"}),this}},{key:"toTrimmed",value:function(){return this.predicates.push({id:"toTrimmed"}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaTo=i,a.Itsa.extend(i,{id:"toDate",validate:function(e){var t=e.val,r=e.setVal,n=e.result,a=new Date(t);if(!isFinite(a.getTime()))return n.registerError("Date conversion failed",t);r(a)}},{id:"toFloat",validate:function(e){var t=e.val,r=e.setVal,n=e.result,a=parseFloat(t);if(isNaN(a))return n.registerError("Float conversion failed",t);r(a)}},{id:"toInt",validate:function(e,t){var r=e.val,n=e.setVal,a=e.result,i=t.radix,o=parseInt(r,null!=i?i:10);if(isNaN(o))return a.registerError("Int conversion failed",r);n(o)}},{id:"toLowerCase",validate:function(e){var t=e.val;(0,e.setVal)(String(t).toLowerCase())}},{id:"toUpperCase",validate:function(e){var t=e.val;(0,e.setVal)(String(t).toUpperCase())}},{id:"toNow",validate:function(e){(0,e.setVal)(new Date)}},{id:"toString",validate:function(e){var t=e.val;(0,e.setVal)(String(t))}},{id:"toTrimmed",validate:function(e){var t=e.val;(0,e.setVal)(String(t).trim())}})},409:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(589),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"touch",value:function(e,t){var r=this.predicates.flatMap((function(e){var t,r;return"optional"===e.id?null===(t=e.settings)||void 0===t||null===(r=t.allowedSchema)||void 0===r?void 0:r.predicates:e})).filter((function(e){return"object"===(null==e?void 0:e.id)}));if(!r.length)throw new Error("This is not an object schema.");if(!e)return e;var a,i=n(r);try{for(i.s();!(a=i.n()).done;){var o=a.value.settings.example;if(!o)throw new Error("A schema example is required.");for(var u=Object.keys(o),l=0,c=u;l<c.length;l++){var s=c[l];s in e||(t?t(s,e):e[s]=void 0)}}}catch(e){i.e(e)}finally{i.f()}return e}},{key:"keys",value:function(){var e=this.touch({});return Object.keys(e)}},{key:"pick",value:function(e){var t,r={},a=n(this.keys());try{for(a.s();!(t=a.n()).done;){var i=t.value;i in e&&(r[i]=e[i])}}catch(e){a.e(e)}finally{a.f()}return r}}])&&i(t.prototype,r),a&&i(t,a),e}();o.Itsa.extend(u)},709:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaTruthy=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"truthy",value:function(){return this.predicates.push({id:"truthy",settings:null}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaTruthy=i,a.Itsa.extend(i,{id:"truthy",validate:function(e){var t=e.val,r=e.result;if(!t)return r.registerError("Expected truthy value.",t)}})},886:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaTypeOf=void 0;var i=r(589),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"typeof",value:function(e){var t={type:e};return this.predicates.push({id:"typeof",settings:t}),this}}])&&a(t.prototype,r),n&&a(t,n),e}();t.ItsaTypeOf=o,i.Itsa.extend(o,{id:"typeof",validate:function(e,t){var r=e.val,a=e.result,i=t.type;i!==n(r)&&a.registerError("Expected ".concat(i),r)}})},457:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaUnique=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"unique",value:function(e){var t={getter:e};return this.predicates.push({id:"unique",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaUnique=i,a.Itsa.extend(i,{id:"unique",validate:function(e,t){var r=e.val,n=e.result,a=t.getter,i=new Set;for(var o in r){var u=r[o];if(a&&(u=a(u)),i.has(u))return n.registerError("".concat(u," occurred multiple times"),r);i.add(u)}}})},997:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(589),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,(r=[{key:"_validate",value:function(e){var t=e.key,r=new u.ItsaValidationResultBuilder(e.settings.exhaustive,t,e.path,e.settings.hint);r.value=e.val;try{var i,o=function(t){e.parent?(e.parent[e.key]=t,e.val=t):r.value=t},l=a(this.predicates);try{for(l.s();!(i=l.n()).done;){var c,s=i.value,f=u.Itsa.validators[s.id];if(!f)throw new Error("Validator not found: ".concat(s.id));var v={setVal:o,result:r.withMessageFormat(null===(c=s.settings)||void 0===c?void 0:c._message),val:e.val,key:e.key,parent:e.parent,exists:e.exists,type:n(e.val),validation:e.settings,path:e.path};if(f.validate(v,s.settings),!r.ok)return r}}catch(e){l.e(e)}finally{l.f()}}catch(e){if("STOP_ON_FIRST_ERROR"!==e)throw e}return r}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._validate({val:e,settings:t,key:null,parent:null,exists:!0,path:[]})}},{key:"validOrThrow",value:function(e,t){this.validate(e,t).okOrThrow()}}])&&o(t.prototype,r),i&&o(t,i),e}();u.Itsa.extend(l)},446:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItsaVerify=void 0;var a=r(589),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"verify",value:function(e){var t={verifier:e};return this.predicates.push({id:"verify",settings:t}),this}}])&&n(t.prototype,r),a&&n(t,a),e}();t.ItsaVerify=i,a.Itsa.extend(i,{id:"verify",validate:function(e,t){var r=e.val,n=e.result,a=t.verifier;try{var i=a(r,e);if("boolean"==typeof i)return void(!1===i&&n.registerError("Value is invalid",r));if("string"==typeof i)return n.registerError(i,r)}catch(e){if("STOP_ON_FIRST_ERROR"===e)throw e;return n.registerError(e,r)}}})}},t={};return function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(589)})()}));
//# sourceMappingURL=itsa.min.js.map