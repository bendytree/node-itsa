{"version":3,"sources":["webpack://ItsaLib/webpack/universalModuleDefinition","webpack://ItsaLib/./src/all.ts","webpack://ItsaLib/./src/and.ts","webpack://ItsaLib/./src/any.ts","webpack://ItsaLib/./src/anything.ts","webpack://ItsaLib/./src/array.ts","webpack://ItsaLib/./src/between.ts","webpack://ItsaLib/./src/boolean.ts","webpack://ItsaLib/./src/build.ts","webpack://ItsaLib/./src/clone.ts","webpack://ItsaLib/./src/constructor.ts","webpack://ItsaLib/./src/convert.ts","webpack://ItsaLib/./src/date.ts","webpack://ItsaLib/./src/decorators.ts","webpack://ItsaLib/./src/default.ts","webpack://ItsaLib/./src/email.ts","webpack://ItsaLib/./src/equal.ts","webpack://ItsaLib/./src/falsy.ts","webpack://ItsaLib/./src/function.ts","webpack://ItsaLib/./src/helpers.ts","webpack://ItsaLib/./src/instanceof.ts","webpack://ItsaLib/./src/integer.ts","webpack://ItsaLib/./src/itsa.ts","webpack://ItsaLib/./src/length.ts","webpack://ItsaLib/./src/matches.ts","webpack://ItsaLib/./src/max.ts","webpack://ItsaLib/./src/min.ts","webpack://ItsaLib/./src/not-empty.ts","webpack://ItsaLib/./src/null.ts","webpack://ItsaLib/./src/number.ts","webpack://ItsaLib/./src/object.ts","webpack://ItsaLib/./src/objectid.ts","webpack://ItsaLib/./src/optional.ts","webpack://ItsaLib/./src/serialize.ts","webpack://ItsaLib/./src/string.ts","webpack://ItsaLib/./src/to.ts","webpack://ItsaLib/./src/touch.ts","webpack://ItsaLib/./src/truthy.ts","webpack://ItsaLib/./src/typeof.ts","webpack://ItsaLib/./src/unique.ts","webpack://ItsaLib/./src/validate.ts","webpack://ItsaLib/./src/verify.ts","webpack://ItsaLib/webpack/bootstrap","webpack://ItsaLib/webpack/startup"],"names":["root","factory","exports","module","define","amd","this","ItsaAll","options","schemas","flat","map","x","primitiveToItsa","schema","predicates","p","push","Itsa","extend","ItsaAnd","ItsaAny","settings","id","validate","context","key","val","parent","validation","exists","result","length","truthyErrors","subSchema","isSchemaTruthy","find","includes","subResult","_validate","path","ok","message","registerError","ItsaAnything","ItsaArray","example","type","Array","isArray","subVal","registerResult","ItsaBetween","min","max","extraSettings","inclusive","ItsaBoolean","overrides","objectPredicates","filter","built","keys","Object","schemaForKey","validator","validators","builder","ItsaBuild","ItsaClone","raw","JSON","parse","stringify","itsa","load","ItsaConstructor","cls","constructor","ItsaConvert","converter","setVal","e","ItsaDate","prototype","toString","call","isFinite","build","target","source","addProperty","combineSchemas","object","ItsaDefault","falsy","Date","rx","ItsaEmail","test","ItsaEqual","strict","ItsaFalsy","ItsaFunction","constructorIs","equal","ItsaInstanceOf","ItsaInteger","isNaN","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","indexOf","ItsaValidationException","errors","join","Error","ItsaValidationResult","error","ItsaValidationResultBuilder","exhaustive","value","undefined","addError","addResult","getOwnPropertyNames","m","it","ItsaLength","exactly","len","ItsaMatches","regex","String","ItsaMax","ItsaMin","ItsaNotEmpty","hasFields","hasOwnProperty","ItsaNull","ItsaNumber","ItsaObject","config","convertedExample","i","pred","extras","RegExp","objectKeys","exampleKeys","partial","extraKeys","k","rxObjectId","ItsaObjectId","ItsaOptional","allowedSchema","convert","el","proto","isObject","ItsaSerialize","ItsaString","ItsaTo","radix","date","getTime","newFloat","parseFloat","newInt","parseInt","toLowerCase","toUpperCase","trim","ItsaTouch","obj","toucher","ItsaTruthy","ItsaTypeOf","ItsaUnique","getter","set","Set","has","add","ItsaValidation","newVal","predicate","okOrThrow","ItsaVerify","verifier","response","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"mappings":"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","file":"itsa.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ItsaLib\"] = factory();\n\telse\n\t\troot[\"ItsaLib\"] = factory();\n})(this, function() {\nreturn ","import {Itsa} from \"./itsa\";\nimport {ItsaOrPrimative, primitiveToItsa} from \"./helpers\";\n\nclass ItsaAll {\n  all (this:Itsa, ...options:(ItsaOrPrimative | ItsaOrPrimative[])[]):Itsa {\n    const schemas = options.flat().map(x => primitiveToItsa(x)) as Itsa[];\n    for (const schema of schemas) {\n      for (const p of schema.predicates) {\n        this.predicates.push(p);\n      }\n    }\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaAll);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaAll { }\n}\n","import {Itsa} from \"./itsa\";\nimport {ItsaOrPrimative, primitiveToItsa} from \"./helpers\";\n\nexport class ItsaAnd {\n  and (this:Itsa, ...options:(ItsaOrPrimative | ItsaOrPrimative[])[]):Itsa {\n    const schemas = options.flat().map(x => primitiveToItsa(x)) as Itsa[];\n    for (const schema of schemas) {\n      for (const p of schema.predicates) {\n        this.predicates.push(p);\n      }\n    }\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaAnd);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaAnd { }\n}\n","import {ItsaValidateContext, Itsa, ItsaValidator} from \"./itsa\";\nimport {ItsaOrPrimative, primitiveToItsa} from \"./helpers\";\n\ninterface ItsaAnySettings {\n  schemas: Itsa[];\n}\n\nclass ItsaAny {\n  any (this:Itsa, ...options:(ItsaOrPrimative | ItsaOrPrimative[])[]):Itsa {\n    const schemas = options.flat().map(x => primitiveToItsa(x)) as Itsa[];\n    const settings:ItsaAnySettings = { schemas };\n    this.predicates.push({ id: 'any', settings });\n    return this as any as Itsa;\n  }\n}\n\nconst validate:ItsaValidator = {\n  id: 'any',\n  validate: (context:ItsaValidateContext, settings:ItsaAnySettings) => {\n    const { key, val, parent, validation, exists, result } = context;\n    const { schemas } = settings;\n\n    if (schemas.length === 0)\n      return;\n\n    const truthyErrors = [];\n    for (const subSchema of schemas) {\n      const isSchemaTruthy = subSchema.predicates.find(p => !['equal', 'falsy'].includes(p.id));\n\n      const subResult = subSchema._validate({\n        key,\n        parent,\n        val,\n        exists,\n        settings: validation,\n        path: context.path,\n      });\n      if (subResult.ok) {\n        return;\n      }else if (isSchemaTruthy) {\n        truthyErrors.push(subResult.message);\n      }\n    }\n\n    if (truthyErrors.length === 1) {\n      result.registerError(truthyErrors[0]);\n    }else{\n      result.registerError(`No schemas matched.`);\n    }\n  }\n};\n\nItsa.extend(ItsaAny, validate);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaAny { }\n}\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\n\nexport class ItsaAnything {\n  anything(this:Itsa):Itsa {\n    this.predicates.push({ id: 'anything', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaAnything, {\n  id: 'anything',\n  validate: (context:ItsaValidateContext) => {\n\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaAnything { }\n}\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\nimport {ItsaOrPrimative, primitiveToItsa} from \"./helpers\";\n\ninterface ItsaArraySettings {\n  example?: Itsa;\n}\n\nexport class ItsaArray {\n  array(this:Itsa, example?:ItsaOrPrimative):Itsa {\n    const settings:ItsaArraySettings = { example: example ? primitiveToItsa(example) : null };\n    this.predicates.push({ id: 'array', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaArray, {\n  id: 'array',\n  validate: (context:ItsaValidateContext, settings:ItsaArraySettings) => {\n    const { val, validation, exists, result, type } = context;\n    const { example } = settings;\n\n    if (!Array.isArray(val)) return result.registerError(`Expected array but found ${type}`);\n\n    if (!example) return;\n    if (!val.length) return;\n\n    for (let key=0; key < val.length; key++) {\n      const subVal = val[key];\n      const subResult = example._validate({\n        key,\n        parent: val,\n        val:subVal,\n        exists,\n        settings: validation,\n        path: [...context.path, key],\n      });\n      result.registerResult(subResult);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaArray { }\n}\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\n\nexport interface ItsaBetweenExtraSettings {\n  inclusive?:boolean;\n}\n\nexport interface ItsaBetweenSettings extends ItsaBetweenExtraSettings {\n  min:any;\n  max:any;\n  inclusive?:boolean;\n}\n\nexport class ItsaBetween {\n  between(this:Itsa, min:any, max:any, extraSettings:ItsaBetweenExtraSettings = {}):Itsa{\n    const settings = extraSettings as ItsaBetweenSettings;\n    settings.min = min;\n    settings.max = max;\n    this.predicates.push({ id: 'between', settings:settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaBetween, {\n  id: 'between',\n  validate: (context:ItsaValidateContext, settings:ItsaBetweenSettings) => {\n    const { val, result } = context;\n    const { min, max } = settings;\n    const inclusive = settings.inclusive ?? true;\n    const isTooLow = inclusive ? (val < min) : (val <= min);\n    if (isTooLow) result.registerError(`Value cannot be under ${min}`);\n    const isTooHigh = inclusive ? (val > max) : (val >= max);\n    if (isTooHigh) result.registerError(`Value cannot be above ${max}`);\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaBetween { }\n}\n","\nimport { ItsaValidateContext } from \"./itsa\";\nimport { Itsa } from \"./itsa\";\n\nexport class ItsaBoolean {\n  boolean(this:Itsa):Itsa{\n    this.predicates.push({ id: 'boolean', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaBoolean, {\n  id: 'boolean',\n  validate: (context:ItsaValidateContext) => {\n    const { type, result } = context;\n    if (type !== 'boolean') result.registerError(`Expected bool but found ${type}`);\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaBoolean { }\n}\n","\nimport { Itsa, ItsaValidator } from './itsa';\nimport { ItsaObjectSettings } from './object';\n\nfunction build<T>(schema:Itsa, overrides?:T):T {\n  const objectPredicates = schema.predicates.filter(p => p.id === 'object');\n  if (objectPredicates.length) {\n    const built = {} as T;\n    for (const predicate of objectPredicates) {\n      const settings = predicate.settings as ItsaObjectSettings;\n      const example = settings.example as any;\n      if (!example) continue;\n      const keys = Object.keys(example);\n      for (const key of keys) {\n        const schemaForKey = example[key];\n        built[key] = build(schemaForKey);\n      }\n    }\n    return built;\n  }\n\n  for (const predicate of schema.predicates) {\n    const validator: ItsaValidator = Itsa.validators[predicate.id];\n    if (validator.builder) return validator.builder(predicate.settings);\n  }\n\n  return undefined;\n};\n\nclass ItsaBuild {\n  build<X>(this:Itsa, overrides?:X):any {\n    return build<X>(this, overrides) as any;\n  }\n}\n\nItsa.extend(ItsaBuild);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaBuild { }\n}\n","\nimport {itsa, Itsa} from \"./itsa\";\n\nexport class ItsaClone {\n  clone(this:Itsa):Itsa{\n    const raw = JSON.parse(JSON.stringify(this));\n    return itsa.load(raw);\n  }\n}\n\nItsa.extend(ItsaClone);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaClone { }\n}\n","\nimport { ItsaValidateContext } from \"./itsa\";\nimport { Itsa } from \"./itsa\";\n\nexport interface ItsaConstructorSettings {\n  cls:Function;\n}\n\nexport class ItsaConstructor {\n  constructorIs(this:Itsa, cls:Function):Itsa{\n    const settings: ItsaConstructorSettings = { cls };\n    this.predicates.push({ id: 'constructor', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaConstructor, {\n  id: 'constructor',\n  validate: (context:ItsaValidateContext, settings: ItsaConstructorSettings) => {\n    const { val, result } = context;\n    const isMatch = val !== null && val !== undefined && val.constructor === settings.cls;\n    if (!isMatch) return result.registerError(`Expected to be ${settings.cls}`);\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaConstructor { }\n}\n","\nimport { Itsa, ItsaValidateContext } from \"./itsa\";\n\nexport interface ItsaConvertSettings {\n  converter:Function;\n}\n\nexport class ItsaConvert {\n  convert(this:Itsa, converter:Function):Itsa{\n    const settings: ItsaConvertSettings = { converter };\n    this.predicates.push({ id: 'convert', settings });\n    return this as any as Itsa;\n  }\n  to(this:Itsa, converter:Function):Itsa{\n    const settings: ItsaConvertSettings = { converter };\n    this.predicates.push({ id: 'convert', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaConvert, {\n  id: 'convert',\n  validate: (context:ItsaValidateContext, settings: ItsaConvertSettings) => {\n    const { val, setVal, result } = context;\n    const { converter } = settings;\n    if (typeof converter !== 'function') return;\n    try {\n      const newVal = converter(val);\n      setVal(newVal);\n    }catch(e){\n      result.registerError(e);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaConvert { }\n}\n\n","\nimport { ItsaValidateContext } from \"./itsa\";\nimport { Itsa } from \"./itsa\";\n\nexport class ItsaDate {\n  date(this:Itsa):Itsa{\n    this.predicates.push({ id: 'date', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaDate, {\n  id: 'date',\n  validate: (context:ItsaValidateContext) => {\n    const { val, result } = context;\n    const type = Object.prototype.toString.call(val);\n    if (type !== \"[object Date]\") {\n      return result.registerError(`Expected date but found ${type}`);\n    }\n    if (!isFinite(val)) {\n      result.registerError(`Date is not valid`);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaDate { }\n}\n\n","\nimport { Itsa, itsa } from \"./itsa\";\nimport { ItsaObjectSettings } from './object';\n\nconst combineSchemas = (target:Itsa, source:Itsa) => {\n  for (const p of source.predicates) {\n    if (p.id === 'object') {\n      const settings = p.settings as ItsaObjectSettings;\n      if (settings.example) {\n        for (const key of Object.keys(settings.example)) {\n          target.addProperty(key, settings.example[key]);\n        }\n      }\n    }else{\n      target.predicates.push(p);\n    }\n  }\n};\n\nexport class ItsaSchema {\n  static schema: Itsa;\n  constructor(overrides?) {\n    const schema = (this as any).constructor.schema;\n    return schema.build(overrides);\n  }\n}\n\nexport function itsaSchema (schema?:Itsa) {\n  return function (target: any) {\n    if (target.schema && schema) {\n      combineSchemas(target.schema, schema);\n    }else if (schema) {\n      target.schema = schema;\n    }else if (target.schema) {\n      // nothing to do\n    }else{\n      target.schema = itsa.object({});\n    }\n  };\n}\n\nexport function itsaField (schema:Itsa) {\n  return function (target: any, key: string) {\n    const cls = target.constructor;\n    if (!cls.schema) {\n      cls.schema = itsa.object({});\n    }\n    cls.schema.addProperty(key, schema);\n  };\n}\n","\nimport { Itsa, ItsaValidateContext } from \"./itsa\";\n\nexport interface ItsaDefaultSettings {\n  val?:any;\n  falsy?: boolean;\n}\n\nexport class ItsaDefault {\n  default(this:Itsa, val, settings:ItsaDefaultSettings = {}):Itsa{\n    settings.val = val;\n    this.predicates.push({ id: 'default', settings });\n    return this as any as Itsa;\n  }\n  defaultNow(this:Itsa):Itsa{\n    this.predicates.push({ id: 'defaultNow', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(\n  ItsaDefault,\n  ...[\n    {\n      id: 'default',\n      builder(settings:ItsaDefaultSettings) {\n        return settings.val;\n      },\n      validate: (context:ItsaValidateContext, settings:ItsaDefaultSettings) => {\n        const { val, setVal } = context;\n        const falsy = settings.falsy ?? false;\n        const doReplace = falsy ? !val : (val === null || val === undefined);\n        if (doReplace) {\n          setVal(settings.val);\n        }\n      }\n    },\n    {\n      id: 'defaultNow',\n      builder(settings:ItsaDefaultSettings) {\n        return new Date();\n      },\n      validate: (context:ItsaValidateContext) => {\n        const { val, setVal } = context;\n        if (val === null || val === undefined) {\n          setVal(new Date());\n        }\n      }\n    }\n  ]\n);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaDefault { }\n}\n\n","\nimport { Itsa, ItsaValidateContext } from \"./itsa\";\n\nconst rx = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\nexport class ItsaEmail {\n  email(this:Itsa):Itsa{\n    this.predicates.push({ id: 'email', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaEmail, {\n  id: 'email',\n  validate: (context:ItsaValidateContext) => {\n    const { val, type, result } = context;\n    if (type !== 'string') return result.registerError(`Expected email but found ${type}`);\n    const isValid = rx.test(val);\n    if (!isValid) {\n      result.registerError('Email address is invalid');\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaEmail { }\n}\n\n","\nimport { Itsa, ItsaValidateContext } from \"./itsa\";\n\nexport interface ItsaEqualSettings {\n  strict?:boolean;\n  example?:any;\n}\n\nexport class ItsaEqual {\n  equal(this:Itsa, val:any, settings:ItsaEqualSettings = {}):Itsa{\n    settings.example = val;\n    this.predicates.push({ id: 'equal', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaEqual, {\n  id: 'equal',\n  validate: (context:ItsaValidateContext, settings:ItsaEqualSettings) => {\n    const { val, result } = context;\n    const { example } = settings;\n    const strict = settings.strict ?? true;\n    const isEqual = strict ? (val === example) : (val == example);\n    if (!isEqual) {\n      result.registerError(`Did not equal ${example}`);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaEqual { }\n}\n\n","\nimport { Itsa, ItsaValidateContext} from \"./itsa\";\n\nexport class ItsaFalsy {\n  falsy(this:Itsa):Itsa{\n    this.predicates.push({ id: 'falsy', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaFalsy, {\n  id: 'falsy',\n  validate: (context:ItsaValidateContext) => {\n    const { val, result } = context;\n    if (val) return result.registerError(`Expected falsy value.`);\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaFalsy { }\n}\n\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\nimport {ItsaOrPrimative, primitiveToItsa} from \"./helpers\";\n\ninterface ItsaFunctionSettings {\n  length?:Itsa;\n}\n\ninterface ItsaFunctionIncomingSettings {\n  length?:ItsaOrPrimative;\n}\n\nexport class ItsaFunction {\n  function(this:Itsa, settings:ItsaFunctionIncomingSettings = {}):Itsa{\n    if (settings.length) settings.length = primitiveToItsa(settings.length);\n    this.predicates.push({ id: 'function', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaFunction, {\n  id: 'function',\n  validate: (context:ItsaValidateContext, settings:ItsaFunctionSettings) => {\n    const { val, type, result } = context;\n    if (type !== 'function') return result.registerError('Expected function');\n    if (settings.length) {\n      const subResult = settings.length._validate({\n        key: 'length',\n        parent: null,\n        val: val.length,\n        exists: true,\n        settings: context.validation,\n        path: context.path,\n      });\n      result.registerResult(subResult);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaFunction { }\n}\n\n","\nimport {itsa, Itsa} from \"./itsa\";\n\nexport declare type ItsaOrPrimative = Itsa | number | string | boolean | null | undefined | Function;\n\nexport function primitiveToItsa (val:ItsaOrPrimative):Itsa {\n  if (val instanceof Itsa) {\n    return val;\n  }else if (typeof val === 'function') {\n    return itsa.constructorIs(val);\n  }else {\n    return itsa.equal(val);\n  }\n}\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\n\ninterface ItsaInstanceOfSettings {\n  cls: any;\n}\n\nexport class ItsaInstanceOf {\n  instanceof(this: Itsa, cls:any):Itsa {\n    const settings:ItsaInstanceOfSettings = { cls };\n    this.predicates.push({ id: 'instanceof', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaInstanceOf, {\n  id: 'instanceof',\n  validate: (context: ItsaValidateContext, settings:ItsaInstanceOfSettings) => {\n    const {val, result} = context;\n    const isInstance = val instanceof settings.cls;\n    if (!isInstance) {\n      result.registerError(`Expected instance of ${settings.cls}`);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaInstanceOf { }\n}\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\n\nexport class ItsaInteger {\n  integer(this:Itsa):Itsa {\n    this.predicates.push({ id: 'integer', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaInteger, {\n  id: 'integer',\n  validate: (context: ItsaValidateContext) => {\n    const {val, result} = context;\n    const valid = typeof val === \"number\"\n      && isNaN(val) === false\n      && [Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY].indexOf(val) === -1\n      && val % 1 === 0;\n    if (!valid) {\n      result.registerError('Invalid integer');\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaInteger { }\n}\n","import { ItsaDefaultSettings } from './default';\n\nexport interface ItsaInternalValidationSettings {\n  val:any;\n  key?:string|number;\n  path:(string|number)[];\n  parent?:object|[];\n  exists: boolean;\n  settings:ItsaValidationSettings;\n}\n\nexport interface ItsaValidationSettings {\n  partial?:boolean;\n  exhaustive?:boolean;\n}\n\nexport interface ItsaError {\n  message:string;\n  key:string | number;\n  path:(string | number)[];\n}\n\nexport class ItsaValidationException extends Error {\n  message: string;\n  result: ItsaValidationResult;\n\n  constructor(result:ItsaValidationResult) {\n    super();\n    const path = result.errors[0].path.join('.');\n    this.message = `${path ? `${path}: ` : ''}${result.errors[0].message}`;\n    this.result = result;\n  }\n}\n\nexport class ItsaValidationResult {\n  ok: boolean = true;\n  errors: ItsaError[] = [];\n  value: any;\n  message?: string;\n\n  okOrThrow(){\n    if (!this.ok) throw new ItsaValidationException(this);\n  }\n\n  addError(error:ItsaError) {\n    this.ok = false;\n    this.message = error.message;\n    this.errors.push(error);\n  }\n\n  addResult(result: ItsaValidationResult) {\n    if (!result.ok) this.ok = false;\n    for (const e of result.errors) {\n      this.errors.push(e);\n    }\n    this.message = this.message || this.errors[0]?.message;\n  }\n}\n\nexport class ItsaValidationResultBuilder extends ItsaValidationResult {\n  ok = true;\n  errors = [];\n  value = undefined;\n  message? = undefined;\n\n  private readonly exhaustive: boolean;\n  private readonly key: string | number;\n  private readonly path: (string | number)[];\n\n  constructor(exhaustive: boolean, key: string | number, path: (string | number)[]) {\n    super();\n    this.key = key;\n    this.exhaustive = exhaustive;\n    this.path = path;\n  }\n\n  registerError (message:string) {\n    const result = new ItsaValidationResult();\n    result.addError({ message, key: this.key, path: this.path });\n    this.addResult(result);\n  }\n\n  registerResult(result: ItsaValidationResult):void{\n    this.addResult(result);\n    if (!this.exhaustive && this.errors.length) {\n      throw 'STOP_ON_FIRST_ERROR';\n    }\n  }\n}\n\nexport interface ItsaValidateContext {\n  parent?:object | [];\n  key?:string | number;\n  path:(string | number)[];\n  exists: boolean;\n  val:any;\n  type: string;\n  setVal:(val:any) => void;\n  validation: ItsaValidationSettings;\n  result: ItsaValidationResultBuilder;\n}\n\nexport interface ItsaPredicate {\n  id:string;\n  settings?:any;\n}\n\nexport interface ItsaValidator {\n  id:string;\n  validate:(ItsaValidateContext, any) => void;\n  builder?:(settings:ItsaDefaultSettings) => any;\n}\n\ntype ItsaSubclass = new (...args: any[]) => any;\n\nexport class Itsa {\n  predicates:ItsaPredicate[] = [];\n  static validators:{[key:string]:ItsaValidator} = {};\n\n  static extend(cls:ItsaSubclass, ...validators: ItsaValidator[]) {\n    for (const validator of validators) {\n      Itsa.validators[validator.id] = validator;\n    }\n\n    const keys = Object.getOwnPropertyNames(cls.prototype).filter(m => m !== 'constructor');\n    for (const key of keys) {\n      const val = cls.prototype[key];\n      Itsa.prototype[key] = val;\n\n      /* istanbul ignore next */\n      if (typeof val === 'function') {\n        itsa[key] = (...args) => {\n          const it = new Itsa();\n          return it[key](...args);\n        };\n      }\n    }\n  }\n}\n\nexport const itsa:Itsa = { predicates: [] } as Itsa;\n\nexport type { ItsaOrPrimative, primitiveToItsa } from './helpers';\n\nimport './all';\nimport './and';\nimport './any';\nimport './anything';\nimport './array';\nimport './between';\nimport './boolean';\nimport './build';\nimport './clone';\nimport './constructor';\nimport './convert';\nimport './date';\nimport './default';\nimport './email';\nimport './equal';\nimport './falsy';\nimport './function';\nimport './instanceof';\nimport './integer';\nimport './length';\nimport './matches';\nimport './max';\nimport './min';\nimport './not-empty';\nimport './null';\nimport './number';\nimport './object';\nimport './objectid';\nimport './optional';\nimport './serialize';\nimport './string';\nimport './to';\nimport './touch';\nimport './truthy';\nimport './typeof';\nimport './unique';\nimport './validate';\nimport './verify';\n\nexport * from './decorators';\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\n\ninterface ItsaLengthSettings {\n  exactly?:number;\n  min?:number;\n  max?:number;\n}\n\nexport class ItsaLength {\n  length(this: Itsa, min?:number, max?:number):Itsa {\n    let settings:ItsaLengthSettings = {\n      min, max\n    };\n    if (typeof min === 'number' && typeof max !== 'number') {\n      settings = { exactly: min };\n    }\n    if (typeof min !== 'number') {\n      settings = { min: 1 };\n    }\n    this.predicates.push({ id: 'length', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaLength, {\n  id: 'length',\n  validate: (context: ItsaValidateContext, settings:ItsaLengthSettings) => {\n    const {val, result} = context;\n    const len = val ? val.length : null;\n    if (typeof len !== 'number') {\n      return result.registerError('Invalid length');\n    }\n    if (typeof settings.exactly === 'number' && settings.exactly !== len) {\n      return result.registerError(`Expected length to be ${settings.exactly}`);\n    }\n    if (typeof settings.min === 'number' && settings.min > len) {\n      return result.registerError(`Expected length to be at least ${settings.min}`);\n    }\n    if (typeof settings.max === 'number' && settings.max < len) {\n      return result.registerError(`Expected length to be at most ${settings.max}`);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaLength { }\n}\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\n\ninterface ItsaMatchesSettings {\n  regex:RegExp;\n}\n\nexport class ItsaMatches {\n  matches(this: Itsa, regex:RegExp):Itsa {\n    const settings:ItsaMatchesSettings = { regex };\n    this.predicates.push({ id: 'matches', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaMatches, {\n  id: 'matches',\n  validate: (context: ItsaValidateContext, settings: ItsaMatchesSettings) => {\n    const {val, result} = context;\n    const valid = settings.regex.test(String(val));\n    if (!valid) {\n      result.registerError(`Does not match ${settings.regex}`);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaMatches { }\n}\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\n\ninterface ItsaMaxSettings {\n  max:any;\n  inclusive:boolean;\n}\n\nexport class ItsaMax {\n  max(this:Itsa, max:any, inclusive?:boolean):Itsa {\n    inclusive = inclusive ?? true;\n    const settings:ItsaMaxSettings = { max, inclusive };\n    this.predicates.push({ id: 'max', settings });\n    return this as any as Itsa;\n  }\n  under(this:Itsa, max:any, inclusive?:boolean):Itsa {\n    inclusive = inclusive ?? false;\n    const settings:ItsaMaxSettings = { max, inclusive };\n    this.predicates.push({ id: 'max', settings });\n    return this as any as Itsa;\n  }\n  below(this:Itsa, max:any, inclusive?:boolean):Itsa {\n    inclusive = inclusive ?? false;\n    const settings:ItsaMaxSettings = { max, inclusive };\n    this.predicates.push({ id: 'max', settings });\n    return this as any as Itsa;\n  }\n  atMost(this:Itsa, max:any, inclusive?:boolean):Itsa {\n    inclusive = inclusive ?? true;\n    const settings:ItsaMaxSettings = { max, inclusive };\n    this.predicates.push({ id: 'max', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaMax, {\n  id: 'max',\n  validate: (context: ItsaValidateContext, settings: ItsaMaxSettings) => {\n    const { val, result } = context;\n    const { max, inclusive } = settings;\n    if (inclusive) {\n      const ok = val <= max;\n      if (!ok) result.registerError(`Value must be at most ${max}`);\n    } else {\n      const ok = val < max;\n      if (!ok) result.registerError(`Value must be less than ${max}`);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaMax { }\n}\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\n\ninterface ItsaMinSettings {\n  min:any;\n  inclusive:boolean;\n}\n\nexport class ItsaMin {\n  min(this: Itsa, min:any, inclusive?:boolean):Itsa {\n    inclusive = inclusive ?? true;\n    const settings:ItsaMinSettings = { min, inclusive };\n    this.predicates.push({ id: 'min', settings });\n    return this as any as Itsa;\n  }\n  over(this: Itsa, min:any, inclusive?:boolean):Itsa {\n    inclusive = inclusive ?? false;\n    const settings:ItsaMinSettings = { min, inclusive };\n    this.predicates.push({ id: 'min', settings });\n    return this as any as Itsa;\n  }\n  above(this: Itsa, min:any, inclusive?:boolean):Itsa {\n    inclusive = inclusive ?? false;\n    const settings:ItsaMinSettings = { min, inclusive };\n    this.predicates.push({ id: 'min', settings });\n    return this as any as Itsa;\n  }\n  atLeast(this: Itsa, min:any, inclusive?:boolean):Itsa {\n    inclusive = inclusive ?? true;\n    const settings:ItsaMinSettings = { min, inclusive };\n    this.predicates.push({ id: 'min', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaMin, {\n  id: 'min',\n  validate: (context: ItsaValidateContext, settings: ItsaMinSettings) => {\n    const { val, result } = context;\n    const { min, inclusive } = settings;\n    if (inclusive) {\n      const ok = val >= min;\n      if (!ok) result.registerError(`Value must be at least ${min}`);\n    } else {\n      const ok = val > min;\n      if (!ok) result.registerError(`Value must be greater than ${min}`);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaMin { }\n}\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\n\nexport class ItsaNotEmpty {\n  notEmpty(this:Itsa):Itsa {\n    this.predicates.push({ id: 'notEmpty', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaNotEmpty, {\n  id: 'notEmpty',\n  validate: (context: ItsaValidateContext) => {\n    const { val, result } = context;\n    const len = val ? val.length : null;\n    if (typeof len === 'number' && len) {\n      return;\n    }\n\n    if (Object.prototype.toString.call(val) === \"[object Object]\") {\n      let hasFields = false;\n      for (const key in val) {\n        if (!val.hasOwnProperty(key)) { continue; }\n        hasFields = true;\n        break;\n      }\n      if (!hasFields) {\n        result.registerError(`Object cannot be empty`);\n      }\n      return;\n    }\n\n    result.registerError(`Value cannot be empty`);\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaNotEmpty { }\n}\n","import {Itsa} from \"./itsa\";\nimport {ItsaEqualSettings} from \"./equal\";\n\nexport class ItsaNull {\n  null(this:Itsa):Itsa {\n    const settings:ItsaEqualSettings = { example: null, strict: true };\n    this.predicates.push({ id: 'equal', settings });\n    return this as any as Itsa;\n  }\n  undef(this:Itsa):Itsa {\n    const settings:ItsaEqualSettings = { example: undefined, strict: true };\n    this.predicates.push({ id: 'equal', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaNull);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaNull { }\n}\n","import {Itsa, ItsaValidateContext} from \"./itsa\";\n\nexport class ItsaNumber {\n  number(this:Itsa):Itsa {\n    this.predicates.push({ id: 'number' });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaNumber, {\n  id: 'number',\n  validate: (context: ItsaValidateContext) => {\n    const {val, type, result} = context;\n    if (type !== 'number') return result.registerError(`Expected number but type is ${type}.`);\n    if (isNaN(val)) return result.registerError(`Expected number but found NaN.`);\n    if (!isFinite(val)) return result.registerError(`Expected number but found infinity.`);\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaNumber { }\n}\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\nimport {ItsaOrPrimative, primitiveToItsa} from \"./helpers\";\n\ninterface ItsaObjectExample {\n  [key: string]:Itsa;\n}\n\ninterface ItsaObjectExampleWithPrimitives {\n  [key: string]:ItsaOrPrimative;\n}\n\ninterface ItsaObjectConfig {\n  extras?: boolean;\n  key?: Itsa;\n  value?: Itsa;\n}\n\nexport interface ItsaObjectSettings {\n  example?: ItsaObjectExample;\n  config: ItsaObjectConfig;\n}\n\nexport class ItsaObject {\n  object(this:Itsa, example?:ItsaObjectExampleWithPrimitives, config:ItsaObjectConfig = {}):Itsa{\n    let convertedExample = null;\n    if (example) {\n      convertedExample = {};\n      for (const key in example) {\n        convertedExample[key] = primitiveToItsa(example[key]);\n      }\n    }\n    if (config.key) {\n      config.key = primitiveToItsa(config.key);\n    }\n    if (config.value) {\n      config.value = primitiveToItsa(config.value);\n    }\n    const settings:ItsaObjectSettings = { example:convertedExample as ItsaObjectExample, config };\n    this.predicates.push({ id: 'object', settings });\n    return this as any as Itsa;\n  }\n  addProperty(this:Itsa, key:string, schema:ItsaOrPrimative):Itsa {\n    for (let i = this.predicates.length - 1; i >= 0; i--) {\n      const pred = this.predicates[i];\n      if (pred.id !== 'object') continue;\n      if (!pred.settings) pred.settings = {};\n      if (!pred.settings.example) pred.settings.example = {};\n      if (!pred.settings.config) pred.settings.config = {};\n      pred.settings.example[key] = primitiveToItsa(schema);\n      break;\n    }\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaObject, {\n  id: 'object',\n  validate: (context:ItsaValidateContext, settings:ItsaObjectSettings) => {\n    const { val, parent, validation, result, type } = context;\n    const { example, config } = settings;\n    const extras = config.extras ?? false;\n\n    // Validate object\n    if (!val) return result.registerError(`Expected object but value is ${val}.`);\n    if (type !== \"object\") return result.registerError(`Expected object but type is ${type}.`);\n    if (val instanceof RegExp) return result.registerError(`Expected object but type is regex.`);\n    if (val instanceof Date) return result.registerError(`Expected object but type is date.`);\n    if (Array.isArray(val)) return result.registerError(`Expected object but type is array.`);\n\n    const objectKeys = Object.keys(val);\n\n    if (example) {\n      // Validate according to example\n      const exampleKeys = Object.keys(example);\n      for (const key of exampleKeys) {\n        // For root object, we might skip missing fields\n        if (!parent && validation.partial && !objectKeys.includes(key)) {\n          continue;\n        }\n\n        const subSchema = example[key];\n        const subResult = subSchema._validate({\n          key,\n          parent:val,\n          val: val[key],\n          exists: key in val,\n          settings: validation,\n          path: [...context.path, key],\n        });\n        result.registerResult(subResult);\n      }\n\n      // Error for extra properties?\n      if (!extras) {\n        const extraKeys = objectKeys.filter(k => !exampleKeys.includes(k));\n        if (extraKeys.length) {\n          result.registerError(`Extra unknown properties: ${extraKeys.join(', ')}`);\n        }\n      }\n    }\n\n    if (config.key) {\n      for (const key of objectKeys) {\n        const subResult = config.key._validate({\n          key,\n          parent: val,\n          val: key,\n          exists: true,\n          settings: validation,\n          path: [...context.path, key],\n        });\n        result.registerResult(subResult);\n      }\n    }\n\n    if (config.value) {\n      for (const key of objectKeys) {\n        const subVal = val[key];\n        const subResult = config.value._validate({\n          key,\n          parent: val,\n          val: subVal,\n          exists: true,\n          settings: validation,\n          path: [...context.path, key],\n        });\n        result.registerResult(subResult);\n      }\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaObject { }\n}\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\n\nconst rxObjectId = /^[0-9a-f]{24}$/i;\n\nexport class ItsaObjectId {\n  objectid(this:Itsa):Itsa{\n    this.predicates.push({ id: 'objectid', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaObjectId, {\n  id: 'objectid',\n  validate: (context:ItsaValidateContext, settings?:any) => {\n    const { val, result, type } = context;\n    if (!val) return result.registerError('ObjectId is required');\n    if (type !== 'string') return result.registerError('ObjectId must be a string');\n    if (val.length !== 24) return result.registerError('ObjectId must have 24 characters');\n    if (!rxObjectId.test(val)) return result.registerError('ObjectId may only contain 0-9, a-z');\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaObjectId { }\n}\n","\nimport { Itsa, ItsaOrPrimative, ItsaValidateContext } from \"./itsa\";\nimport { primitiveToItsa} from \"./helpers\";\n\ninterface ItsaOptionalSettings {\n  allowedSchema:Itsa;\n}\n\nexport class ItsaOptional {\n  optional(this:Itsa, allowedSchema:ItsaOrPrimative):Itsa{\n    const settings:ItsaOptionalSettings = { allowedSchema: primitiveToItsa(allowedSchema) };\n    this.predicates.push({ id: 'optional', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaOptional, {\n  id: 'optional',\n  validate: (context:ItsaValidateContext, settings:ItsaOptionalSettings) => {\n    const { key, parent, exists, validation, path, val, result } = context;\n    if (val === null) return;\n    if (val === undefined) return;\n\n    const subResult = settings.allowedSchema._validate({\n      key,\n      parent,\n      val,\n      exists,\n      path,\n      settings: validation,\n    });\n    if (!subResult.ok) {\n      return result.registerError(subResult.message);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaOptional { }\n}\n","\nimport {Itsa, ItsaPredicate} from \"./itsa\";\n\ntype RawItsa = {predicates:ItsaPredicate[]};\n\nconst convert = (el:any) => {\n  const proto = Object.prototype.toString.call(el);\n  const isObject = `[object Object]` === proto;\n  const isArray = `[object Array]` === proto;\n  if (!isObject && !isArray) {\n    return el;\n  }\n\n  // replace sub-schemas: depth first\n  for (const key in el) {\n    el[key] = convert(el[key]);\n  }\n\n  if (isObject && el.predicates) {\n    const i = new Itsa();\n    i.predicates = el.predicates;\n    return i;\n  }\n\n  return el;\n}\n\nexport class ItsaSerialize {\n  load(this:Itsa, raw:RawItsa):Itsa{\n    this.predicates = convert(raw).predicates;\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaSerialize);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaSerialize { }\n}\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\n\nexport class ItsaString {\n  string(this:Itsa):Itsa{\n    this.predicates.push({ id: 'string', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaString, {\n  id: 'string',\n  validate: (context:ItsaValidateContext) => {\n    const { type, result } = context;\n    if (type !== 'string') return result.registerError(`Expected string`);\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaString { }\n}\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\n\ninterface ItsaToIntSettings {\n  radix?:number;\n}\n\nexport class ItsaTo {\n  toDate(this:Itsa):Itsa{\n    this.predicates.push({ id: 'toDate', settings:null });\n    return this as any as Itsa;\n  }\n  toFloat(this:Itsa):Itsa{\n    this.predicates.push({ id: 'toFloat', settings:null });\n    return this as any as Itsa;\n  }\n  toInt(this:Itsa, radix?:number):Itsa{\n    const settings:ItsaToIntSettings = { radix };\n    this.predicates.push({ id: 'toInt', settings });\n    return this as any as Itsa;\n  }\n  toLowerCase(this:Itsa):Itsa{\n    this.predicates.push({ id: 'toLowerCase' });\n    return this as any as Itsa;\n  }\n  toUpperCase(this:Itsa):Itsa{\n    this.predicates.push({ id: 'toUpperCase' });\n    return this as any as Itsa;\n  }\n  toNow(this:Itsa):Itsa{\n    this.predicates.push({ id: 'toNow' });\n    return this as any as Itsa;\n  }\n  toString(this:Itsa):Itsa{\n    this.predicates.push({ id: 'toString' });\n    return this as any as Itsa;\n  }\n  toTrimmed(this:Itsa):Itsa{\n    this.predicates.push({ id: 'toTrimmed' });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(\n  ItsaTo,\n  {\n    id: 'toDate',\n    validate: (context:ItsaValidateContext) => {\n      const { val, setVal, result } = context;\n      const date = new Date(val);\n      if (!isFinite(date.getTime())) return result.registerError(`Date conversion failed`);\n      setVal(date);\n    }\n  },\n  {\n    id: 'toFloat',\n    validate: (context:ItsaValidateContext) => {\n      const { val, setVal, result } = context;\n      const newFloat = parseFloat(val);\n      if (isNaN(newFloat)) return result.registerError(`Float conversion failed`);\n      setVal(newFloat);\n    }\n  },\n  {\n    id: 'toInt',\n    validate: (context:ItsaValidateContext, settings:ItsaToIntSettings) => {\n      const { val, setVal, result } = context;\n      const { radix } = settings;\n      const newInt = parseInt(val, radix ?? 10);\n      if (isNaN(newInt)) return result.registerError(`Int conversion failed`);\n      setVal(newInt);\n    }\n  },\n  {\n    id: 'toLowerCase',\n    validate: (context:ItsaValidateContext) => {\n      const { val, setVal } = context;\n      setVal(String(val).toLowerCase());\n    }\n  },\n  {\n    id: 'toUpperCase',\n    validate: (context:ItsaValidateContext) => {\n      const { val, setVal } = context;\n      setVal(String(val).toUpperCase());\n    }\n  },\n  {\n    id: 'toNow',\n    validate: (context:ItsaValidateContext) => {\n      const { setVal } = context;\n      setVal(new Date());\n    }\n  },\n  {\n    id: 'toString',\n    validate: (context:ItsaValidateContext) => {\n      const { val, setVal } = context;\n      setVal(String(val));\n    }\n  },\n  {\n    id: 'toTrimmed',\n    validate: (context:ItsaValidateContext) => {\n      const { val, setVal } = context;\n      setVal(String(val).trim());\n    }\n  },\n);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaTo { }\n}\n","\nimport { Itsa } from './itsa';\nimport { ItsaObjectSettings } from './object';\n\nclass ItsaTouch {\n  touch<X>(this:Itsa, obj:X, toucher?:(string, X) => void):X {\n    const objectPredicates = this.predicates.filter(p => p.id === 'object');\n    if (!objectPredicates.length) throw new Error(`This is not an object schema.`);\n    if (!obj) return obj;\n    for (const predicate of objectPredicates) {\n      const settings = predicate.settings as ItsaObjectSettings;\n      const example = settings.example as any;\n      if (!example) throw new Error(`A schema example is required.`);\n      const keys = Object.keys(example);\n      for (const key of keys) {\n        if (!(key in obj)) {\n          if (toucher) {\n            toucher(key, obj);\n          }else{\n            obj[key] = undefined;\n          }\n        }\n      }\n    }\n    return obj;\n  }\n}\n\nItsa.extend(ItsaTouch);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaTouch { }\n}\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\n\nexport class ItsaTruthy {\n  truthy(this:Itsa):Itsa{\n    this.predicates.push({ id: 'truthy', settings:null });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaTruthy, {\n  id: 'truthy',\n  validate: (context:ItsaValidateContext) => {\n    const { val, result } = context;\n    if (!val) return result.registerError(`Expected truthy value.`);\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaTruthy { }\n}\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\n\ninterface ItsaTypeOfSettings {\n  type: string;\n}\n\nexport class ItsaTypeOf {\n  typeof(this:Itsa, type:string):Itsa{\n    const settings: ItsaTypeOfSettings = { type };\n    this.predicates.push({ id: 'typeof', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaTypeOf, {\n  id: 'typeof',\n  validate: (context:ItsaValidateContext, settings: ItsaTypeOfSettings) => {\n    const { val, result } = context;\n    const { type } = settings;\n    const actualType = typeof val;\n    if (type !== actualType) {\n      result.registerError(`Expected ${type}`);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaTypeOf { }\n}\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\n\ninterface ItsaUniqueSettings {\n  getter?: Function;\n}\n\nexport class ItsaUnique {\n  unique(this:Itsa, getter?:Function):Itsa{\n    const settings: ItsaUniqueSettings = { getter };\n    this.predicates.push({ id: 'unique', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaUnique, {\n  id: 'unique',\n  validate: (context:ItsaValidateContext, settings: ItsaUniqueSettings) => {\n    const { val, result } = context;\n    const { getter } = settings;\n    const set = new Set();\n    for (const key in val) {\n      let subVal = val[key];\n      if (getter) subVal = getter(subVal);\n      if (set.has(subVal)) {\n        return result.registerError(`${subVal} occurred multiple times`);\n      }\n      set.add(subVal);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaUnique { }\n}\n","\nimport {\n  Itsa,\n  ItsaValidator,\n  ItsaValidateContext,\n  ItsaInternalValidationSettings,\n  ItsaValidationResult,\n  ItsaValidationSettings,\n  ItsaValidationResultBuilder\n} from './itsa';\n\nclass ItsaValidation {\n  _validate(this:Itsa, settings:ItsaInternalValidationSettings):ItsaValidationResultBuilder {\n    const { key } = settings;\n    const result = new ItsaValidationResultBuilder(settings.settings.exhaustive, key, settings.path);\n    result.value = settings.val;\n    try {\n      const setVal = (newVal:any) => {\n        if (settings.parent) {\n          settings.parent[settings.key] = newVal;\n          settings.val = newVal;\n        }else{\n          result.value = newVal;\n        }\n      };\n      for (const predicate of this.predicates) {\n        const validator:ItsaValidator = Itsa.validators[predicate.id];\n\n        /* istanbul ignore next */\n        if (!validator) throw new Error(`Validator not found: ${predicate.id}`);\n\n        const context:ItsaValidateContext = {\n          setVal,\n          result,\n          val: settings.val,\n          key: settings.key,\n          parent: settings.parent,\n          exists: settings.exists,\n          type: typeof settings.val,\n          validation: settings.settings,\n          path: settings.path,\n        };\n        validator.validate(context, predicate.settings);\n        if (!result.ok) return result;\n      }\n    }catch (e){\n      /* istanbul ignore next */\n      if (e !== 'STOP_ON_FIRST_ERROR') throw e;\n    }\n    return result;\n  }\n\n  validate(this:Itsa, val: any, settings:ItsaValidationSettings = {}):ItsaValidationResult {\n    return this._validate({\n      val,\n      settings,\n      key:null,\n      parent:null,\n      exists: true,\n      path: [],\n    });\n  }\n\n  validOrThrow(this:Itsa, val:any, settings?:ItsaValidationSettings) {\n    this.validate(val, settings).okOrThrow();\n  }\n}\n\nItsa.extend(ItsaValidation);\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaValidation { }\n}\n","\nimport {Itsa, ItsaValidateContext} from \"./itsa\";\n\ninterface ItsaVerifySettings {\n  verifier: Function;\n}\n\nexport class ItsaVerify {\n  verify(this:Itsa, verifier:Function):Itsa{\n    const settings: ItsaVerifySettings = { verifier };\n    this.predicates.push({ id: 'verify', settings });\n    return this as any as Itsa;\n  }\n}\n\nItsa.extend(ItsaVerify, {\n  id: 'verify',\n  validate: (context:ItsaValidateContext, settings: ItsaVerifySettings) => {\n    const { val, result } = context;\n    const { verifier } = settings;\n    try {\n      const response = verifier(val);\n      if (typeof response === 'boolean') {\n        if (response === false) {\n          result.registerError(`Value is invalid`);\n        }\n        return;\n      }\n      if (typeof response === 'string') {\n        return result.registerError(response);\n      }\n    }catch(e){\n      if (e === 'STOP_ON_FIRST_ERROR') throw e;\n      return result.registerError(e);\n    }\n  }\n});\n\ndeclare module './itsa' {\n  interface Itsa extends ItsaVerify { }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(589);\n"],"sourceRoot":""}